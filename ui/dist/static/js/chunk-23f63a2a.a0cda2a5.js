(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23f63a2a"],{"0013":function(e,t,a){},"0405":function(e,t,a){"use strict";var s=a("4b85"),l=a.n(s);l.a},"0626":function(e,t,a){"use strict";var s=a("9419"),l=a.n(s);l.a},"0868":function(e,t,a){"use strict";var s=a("57e4"),l=a.n(s);l.a},"0892":function(e,t,a){},"13cc":function(e,t,a){"use strict";var s=a("5040"),l=a.n(s);l.a},"265a":function(e,t,a){"use strict";var s=a("affc"),l=a.n(s);l.a},2978:function(e,t,a){"use strict";a.d(t,"k",(function(){return l})),a.d(t,"i",(function(){return r})),a.d(t,"j",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return n})),a.d(t,"f",(function(){return c})),a.d(t,"a",(function(){return p})),a.d(t,"h",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"d",(function(){return f}));var s=a("b775");function l(e){return Object(s["a"])({url:"project/apps",method:"get",params:e})}function r(e){return Object(s["a"])({url:"project/apps/status",method:"get",params:e})}function i(e){return Object(s["a"])({url:"project/apps/versions",method:"get",params:e})}function o(e){return Object(s["a"])({url:"project/apps/".concat(e),method:"get"})}function n(e){return Object(s["a"])({url:"project/apps/".concat(e),method:"delete"})}function c(e){return Object(s["a"])({url:"project/apps/version/".concat(e),method:"get"})}function p(e){return Object(s["a"])({url:"/project/apps",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/project/apps/install",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/project/apps/destroy",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/project/apps/import_storeapp",method:"post",data:e})}function f(e){return Object(s["a"])({url:"/project/apps/duplicate_app",method:"post",data:e})}},"3cc0":function(e,t,a){},"42a4":function(e,t,a){},"4b85":function(e,t,a){},5040:function(e,t,a){},"57c2":function(e,t,a){"use strict";var s=a("3cc0"),l=a.n(s);l.a},"57e4":function(e,t,a){},"6c56":function(e,t,a){"use strict";var s=a("bf1e"),l=a.n(s);l.a},"76b1":function(e,t,a){},7952:function(e,t,a){"use strict";var s=a("ecf8"),l=a.n(s);l.a},"79c4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("clusterbar",{attrs:{titleName:e.titleName,titleLink:["workspaceApp"]}},[a("div",{attrs:{slot:"right-btn"},slot:"right-btn"},[a("el-button",{staticClass:"bar-btn",attrs:{size:"small",type:""},on:{click:e.cancelSaveApp}},[e._v("取 消")]),a("el-button",{staticClass:"bar-btn",attrs:{size:"small",type:"primary"},on:{click:e.createAppDialog}},[e._v("保 存")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dashboard-container app-create-container",style:{margin:"0px",height:e.maxHeight+"px"},attrs:{"max-height":e.maxHeight}},[a("div",{staticStyle:{padding:"10px 8px 0px"}},[a("div",[e._v("基本信息")]),a("el-form",{staticClass:"base-info-class",staticStyle:{padding:"10px 20px 0px"},attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"应用名称",prop:"name"}},[a("el-input",{attrs:{disabled:!!e.appVersionId,placeholder:"请输入应用名称",size:"small"},on:{input:e.appFormNameChange},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"应用类型",required:""}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio-button",{attrs:{label:"ordinary_app"}},[e._v("普通应用")]),a("el-radio-button",{attrs:{label:"middleware"}},[e._v("中间件")])],1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"应用描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入应用描述",size:"small"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1),a("div",{staticClass:"app-template-class",staticStyle:{padding:"0px 8px 0px"}},[a("div",{staticStyle:{"margin-bottom":"13px"}},[a("div",{staticStyle:{display:"inline-block"}},[e._v(" 应用配置 ")]),a("div",{staticStyle:{display:"inline-block",float:"right","margin-right":"5px"}},[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link",staticStyle:{cursor:"pointer",color:"#0c81f5"}},[e._v(" 添加资源"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return t.preventDefault(),e.resourceAddClick("Service")}}},[e._v("Service")]),a("el-dropdown-item",{nativeOn:{click:function(t){return t.preventDefault(),e.resourceAddClick("ConfigMap")}}},[e._v("ConfigMap")]),a("el-dropdown-item",{nativeOn:{click:function(t){return t.preventDefault(),e.resourceAddClick("Secret")}}},[e._v("Secret")]),a("el-dropdown-item",{nativeOn:{click:function(t){return t.preventDefault(),e.resourceAddClick("PersistentVolumeClaim")}}},[e._v("PersistentVolumeClaim")])],1)],1)],1)]),a("el-tabs",{staticStyle:{padding:"0px"},attrs:{type:"border-card",addable:!1},on:{"tab-remove":e.resourceTabRemove},model:{value:e.resourceTabVal,callback:function(t){e.resourceTabVal=t},expression:"resourceTabVal"}},e._l(e.form.templates,(function(t,s){return a("el-tab-pane",{key:s+"",attrs:{name:s+"",closable:0!=s}},[a("div",{staticStyle:{display:"inherit","vertical-align":"middle","font-size":"5px","line-height":"10px","font-weight":"400"},attrs:{slot:"label"},slot:"label"},[a("div",{staticStyle:{"font-weight":"300"}},[e._v(e._s(t.kind))]),a("div",{staticStyle:{display:"block","font-size":"14px","line-height":"20px",align:"center","font-weight":"500"}},[e._v(e._s(t.metadata.name?t.metadata.name:" unnaming"))])]),a("div",{staticStyle:{"padding-bottom":"20px"}},[e.workloadTypes.indexOf(t.kind)>=0?a("workload",{attrs:{template:t,appResources:e.form.templates}}):e._e(),"Service"==t.kind?a("service",{attrs:{template:t,containers:e.form.templates[0].spec.template.spec.containers}}):e._e(),"ConfigMap"==t.kind?a("config-map",{attrs:{template:t}}):e._e(),"Secret"==t.kind?a("secret",{attrs:{template:t}}):e._e(),"PersistentVolumeClaim"==t.kind?a("pvc",{attrs:{template:t}}):e._e()],1)])})),1)],1),a("el-dialog",{attrs:{title:e.updateFormVisible?"升级应用":"保存应用版本",visible:e.createFormVisible,"destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.createFormVisible=t},close:e.closeFormDialog}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.installLoading,expression:"installLoading"}]},[a("div",{staticClass:"dialogContent"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"left","label-width":"105px"}},[a("el-form-item",{attrs:{label:"应用名称",prop:"name"}},[a("span",[e._v(e._s(e.form.name))])]),e.appVersionId?a("el-form-item",{attrs:{label:"应用版本",prop:"name"}},[a("span",[e._v(e._s(e.chart.version))])]):e._e(),a("el-form-item",{attrs:{label:"三位版本号",prop:"version",required:""}},[a("el-input",{attrs:{placeholder:"请输入应用三位版本号",size:"small"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),a("el-form-item",{attrs:{label:"第四位版本号",required:""}},[a("el-input",{attrs:{placeholder:"请输入应用第四位版本号",size:"small"},model:{value:e.form.fourthVersion,callback:function(t){e.$set(e.form,"fourthVersion",t)},expression:"form.fourthVersion"}})],1),a("el-form-item",{attrs:{label:"版本说明",required:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入应用版本说明",size:"small"},model:{value:e.form.version_description,callback:function(t){e.$set(e.form,"version_description",t)},expression:"form.version_description"}})],1)],1)],1),a("div",{staticClass:"dialogFooter",staticStyle:{"padding-top":"25px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{"margin-right":"20px"},on:{click:function(t){e.createFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateFormVisible?e.handleUpdateApp():e.handleCreateApp()}}},[e._v(" "+e._s((e.createFormVisible,"创 建"))+" ")])],1)])])],1)],1)},l=[],r=(a("a4d3"),a("e01a"),a("99af"),a("c975"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("ddb0"),a("b85c")),i=a("61b2"),o=a("2978"),n=a("5c96"),c=(a("a15b"),a("8b96")),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:10}},[a("div",[a("el-form",{staticStyle:{padding:"5px 0px 0px"},attrs:{"label-position":"left",model:e.probe,"label-width":"0px"}},[a("el-form-item",{staticStyle:{width:"700px"},attrs:{label:""}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.probe.type,callback:function(t){e.$set(e.probe,"type",t)},expression:"probe.type"}},[a("el-radio-button",{attrs:{label:"http"}},[e._v("HTTP")]),a("el-radio-button",{attrs:{label:"https"}},[e._v("HTTPS")]),a("el-radio-button",{attrs:{label:"tcp"}},[e._v("TCP")]),a("el-radio-button",{attrs:{label:"command"}},[e._v("命令行")])],1)],1)],1)],1),["http","https"].indexOf(e.probe.type)>=0?a("div",{staticStyle:{"margin-top":"10px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("span",{staticStyle:{color:"#8B959C",display:"inline-block",width:"100px"}},[e._v("请求路径")])]),a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{size:"small",placeholder:"如：/health"},model:{value:e.probe.handle.path,callback:function(t){e.$set(e.probe.handle,"path",t)},expression:"probe.handle.path"}})],1)],1)],1):e._e(),["http","https","tcp"].indexOf(e.probe.type)>=0?a("div",{staticStyle:{"margin-top":"10px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("span",{staticStyle:{color:"#8B959C",display:"inline-block",width:"100px"}},[e._v("端口")])]),a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{size:"small",placeholder:"如：80"},model:{value:e.probe.handle.port,callback:function(t){e.$set(e.probe.handle,"port",t)},expression:"probe.handle.port"}})],1)],1)],1):e._e(),"command"===e.probe.type?a("div",{staticStyle:{"margin-top":"10px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("span",{staticStyle:{color:"#8B959C",display:"inline-block",width:"100px"}},[e._v("运行命令")])]),a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{size:"small",placeholder:'如：["/bin/bash", "-c", "ps -ef | grep 80"]'},model:{value:e.probe.handle.command,callback:function(t){e.$set(e.probe.handle,"command",t)},expression:"probe.handle.command"}})],1)],1)],1):e._e()]),a("el-col",{staticStyle:{"border-left":"1px solid #DCDFE6","padding-left":"15px","padding-bottom":"9px"},attrs:{span:12}},[a("el-row",[a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:6}},[a("div",{staticStyle:{color:"#8B959C","padding-bottom":"0px"}},[e._v(" 检查间隔 ")]),a("el-input",{attrs:{size:"small",placeholder:"默认为10"},model:{value:e.probe.periodSeconds,callback:function(t){e.$set(e.probe,"periodSeconds",t)},expression:"probe.periodSeconds"}},[a("template",{slot:"suffix"},[e._v("秒")])],2)],1),a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:6}},[a("div",{staticStyle:{color:"#8B959C","padding-bottom":"0px"}},[e._v(" 初始延迟 ")]),a("el-input",{attrs:{size:"small",placeholder:"默认为0","controls-position":"right"},model:{value:e.probe.initialDelaySeconds,callback:function(t){e.$set(e.probe,"initialDelaySeconds",t)},expression:"probe.initialDelaySeconds"}},[a("template",{slot:"suffix"},[e._v("秒")])],2)],1),a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:6}},[a("div",{staticStyle:{color:"#8B959C","padding-bottom":"0px"}},[e._v(" 超时时间 ")]),a("el-input",{attrs:{size:"small",placeholder:"默认为1"},model:{value:e.probe.timeoutSeconds,callback:function(t){e.$set(e.probe,"timeoutSeconds",t)},expression:"probe.timeoutSeconds"}},[a("template",{slot:"suffix"},[e._v("秒")])],2)],1)],1),a("el-row",{staticStyle:{"margin-top":"18px"}},[a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{color:"#8B959C",display:"inline-block",width:"100px"}},[e._v("成功阈值")])]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{"controls-position":"right",size:"small",placeholder:"默认为1"},model:{value:e.probe.successThreshold,callback:function(t){e.$set(e.probe,"successThreshold",t)},expression:"probe.successThreshold"}})],1)],1)],1),a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{color:"#8B959C",display:"inline-block",width:"100px"}},[e._v("故障阈值")])]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{"controls-position":"right",size:"small",placeholder:"默认为1"},model:{value:e.probe.failureThreshold,callback:function(t){e.$set(e.probe,"failureThreshold",t)},expression:"probe.failureThreshold"}})],1)],1)],1)],1)],1)],1)],1)},d=[],u={name:"HealthProbe",data:function(){return{}},props:{probe:{type:Object,required:!0,default:{}}},methods:{},beforeMount:function(){console.log(this.probe)}},m=u,f=(a("b728"),a("2877")),v=Object(f["a"])(m,p,d,!1,null,"b431b8bc",null),b=v.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0px 20px 0px 10px"}},[a("el-tabs",{attrs:{type:"border-card","before-leave":e.containerTabChange},on:{"tab-remove":e.containerTabRemove,"tab-click":e.containerTabClick},model:{value:e.containerTabVal,callback:function(t){e.containerTabVal=t},expression:"containerTabVal"}},[e._l(e.containers,(function(t,s){return a("el-tab-pane",{key:s+"",staticStyle:{padding:"15px"},attrs:{name:s+"",closable:e.containers.length>1}},[a("span",{attrs:{slot:"label"},slot:"label"},[t.init?a("i",{staticClass:"el-icon-info"}):e._e(),e._v(" "+e._s(t.name?t.name:"容器"+(s+1))+" ")]),a("el-form",{attrs:{model:t,rules:e.containerRules,"label-width":"120px","label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticClass:"input-class",attrs:{placeholder:"容器名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"c.name"}})],1),a("el-form-item",{attrs:{label:"镜像",prop:"image"}},[a("el-input",{staticClass:"input-class",attrs:{placeholder:"镜像名称，如：centos:7.6"},model:{value:t.image,callback:function(a){e.$set(t,"image",a)},expression:"c.image"}})],1),a("el-form-item",{attrs:{label:"镜像拉取",prop:"imagePullPolicy"}},[a("el-select",{staticClass:"input-class",attrs:{placeholder:"镜像拉取策略"},model:{value:t.imagePullPolicy,callback:function(a){e.$set(t,"imagePullPolicy",a)},expression:"c.imagePullPolicy"}},[a("el-option",{attrs:{label:"Always",value:"Always"}}),a("el-option",{attrs:{label:"IfNotPresent",value:"IfNotPresent"}}),a("el-option",{attrs:{label:"Never",value:"Never"}})],1)],1),a("el-form-item",{attrs:{label:"initContainer",prop:"init"}},[a("el-switch",{model:{value:t.init,callback:function(a){e.$set(t,"init",a)},expression:"c.init"}})],1),a("el-form-item",{attrs:{label:"Commands",prop:"command"}},[a("el-input",{staticClass:"input-class",staticStyle:{width:"400px"},attrs:{placeholder:'容器启动执行的命令，如：["/bin/bash"]'},model:{value:t.command,callback:function(a){e.$set(t,"command",a)},expression:"c.command"}})],1),a("el-form-item",{attrs:{label:"Args",prop:"args"}},[a("el-input",{staticClass:"input-class",staticStyle:{width:"400px"},attrs:{placeholder:'执行命令所需的参数，如：["-c", "echo hello"]'},model:{value:t.args,callback:function(a){e.$set(t,"args",a)},expression:"c.args"}})],1),a("el-form-item",{attrs:{label:"工作目录",prop:"workingDir"}},[a("el-input",{staticClass:"input-class",attrs:{placeholder:"容器启动后的工作目录，如：/app"},model:{value:t.workingDir,callback:function(a){e.$set(t,"workingDir",a)},expression:"c.workingDir"}})],1),a("el-divider"),a("div",{staticStyle:{display:"table"}},[a("div",{staticStyle:{display:"table-cell",width:"120px","vertical-align":"middle"}},[a("label",{staticStyle:{"font-size":"14px","font-weight":"400",color:"#99a9bf"}},[e._v("资源")])]),a("div",{staticStyle:{display:"table-cell"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{color:"#8B959C","font-size":".7em","margin-left":"50px",display:"inline-block",width:"150px"}},[e._v("最小请求")]),a("span",{staticStyle:{color:"#8B959C","font-size":".7em"}},[e._v("最大限制")])]),a("div",{staticStyle:{"margin-bottom":"5px"}},[a("span",{staticStyle:{color:"#8B959C","font-size":".7em",display:"inline-block",width:"50px"}},[e._v("CPU")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"如：0.25"},model:{value:t.resources.requests.cpu,callback:function(a){e.$set(t.resources.requests,"cpu",a)},expression:"c.resources.requests.cpu"}}),a("span",{staticStyle:{color:"#8B959C","font-size":".85em",display:"inline-block",width:"30px","text-align":"center"}},[e._v("～")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"如：0.5"},model:{value:t.resources.limits.cpu,callback:function(a){e.$set(t.resources.limits,"cpu",a)},expression:"c.resources.limits.cpu"}}),a("span",{staticStyle:{color:"#8B959C","font-size":".85em","margin-left":"5px"}},[e._v("Core")])],1),a("div",[a("span",{staticStyle:{color:"#8B959C","font-size":".7em",display:"inline-block",width:"50px"}},[e._v("内存")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"如：128"},model:{value:t.resources.requests.memory,callback:function(a){e.$set(t.resources.requests,"memory",a)},expression:"c.resources.requests.memory"}}),a("span",{staticStyle:{color:"#8B959C","font-size":".85em",display:"inline-block",width:"30px","text-align":"center"}},[e._v("～")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"如：256"},model:{value:t.resources.limits.memory,callback:function(a){e.$set(t.resources.limits,"memory",a)},expression:"c.resources.limits.memory"}}),a("span",{staticStyle:{color:"#8B959C","font-size":".85em","margin-left":"5px"}},[e._v("MiB")])],1)])]),a("el-divider"),a("el-form-item",{attrs:{label:"端口映射",prop:"port"}},[t.ports.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[e._v(" 名称 ")])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("容器端口 ")])]),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"border-span-header"},[e._v(" 协议 ")])])],1):e._e(),e._l(t.ports,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"10px"}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"端口名称"},model:{value:s.name,callback:function(t){e.$set(s,"name",t)},expression:"item.name"}})],1)]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"容器暴露端口，如：80"},model:{value:s.containerPort,callback:function(t){e.$set(s,"containerPort",t)},expression:"item.containerPort"}})],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header",staticStyle:{"padding-right":"10px"}},[a("el-select",{attrs:{placeholder:"端口所属协议"},model:{value:s.protocol,callback:function(t){e.$set(s,"protocol",t)},expression:"item.protocol"}},[a("el-option",{attrs:{label:"TCP",value:"TCP"}}),a("el-option",{attrs:{label:"UDP",value:"UDP"}}),a("el-option",{attrs:{label:"SCTP",value:"SCTP"}})],1)],1)]),a("el-col",{attrs:{span:5}},[a("el-button",{staticStyle:{padding:"4px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(e){return t.ports.splice(l,1)}}})],1)],1)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.ports.push({protocol:"TCP"})}}})],2),a("el-divider"),a("el-form-item",{attrs:{label:"环境变量",prop:"env"}},[t.env.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("名称 ")])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[e._v(" 类型 ")])]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("值 ")])])],1):e._e(),e._l(t.env,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"0px"}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"变量名称"},model:{value:s.name,callback:function(t){e.$set(s,"name",t)},expression:"item.name"}})],1)]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[a("el-select",{staticStyle:{"padding-right":"10px"},attrs:{placeholder:"类型"},on:{change:function(e){delete s.value,delete s.key}},model:{value:s.type,callback:function(t){e.$set(s,"type",t)},expression:"item.type"}},[a("el-option",{attrs:{label:"value",value:"value"}}),a("el-option",{attrs:{label:"configMap",value:"configMap"}}),a("el-option",{attrs:{label:"secret",value:"secret"}}),a("el-option",{attrs:{label:"field",value:"field"}}),a("el-option",{attrs:{label:"resource",value:"resource"}})],1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:8}},[a("div",{staticClass:"border-span-header"},["value"===s.type?a("el-input",{attrs:{size:"small",placeholder:"变量值"},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"item.value"}}):e._e(),"field"===s.type?a("el-input",{attrs:{size:"small",placeholder:"如：metadata.name, status.podIP"},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"item.value"}}):e._e(),"configMap"===s.type||"secret"===s.type?a("div",[a("el-select",{staticStyle:{width:"50%"},attrs:{"value-key":"name",placeholder:s.type},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"item.value"}},e._l("configMap"===s.type?e.appConfigmaps:e.appSecrets,(function(e,t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1),a("el-select",{staticStyle:{"margin-left":"10px",width:"45%"},attrs:{placeholder:"Key"},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"item.key"}},["configMap"==s.type?e._l(e.resData(s.type,s.value),(function(e){return a("el-option",{key:e.key,attrs:{label:e.key,value:e.key}})})):e._l(e.resData(s.type,s.value),(function(e,t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],2)],1):e._e(),"resource"===s.type?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"容器资源"},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"item.value"}},[a("el-option",{attrs:{label:"limits.cpu",value:"limits.cpu"}}),a("el-option",{attrs:{label:"limits.memory",value:"limits.memory"}}),a("el-option",{attrs:{label:"limits.ephemeral-storage",value:"limits.ephemeral-storage"}}),a("el-option",{attrs:{label:"requests.cpu",value:"requests.cpu"}}),a("el-option",{attrs:{label:"requests.memory",value:"requests.memory"}}),a("el-option",{attrs:{label:"requests.ephemeral-storage",value:"requests.ephemeral-storage"}})],1):e._e()],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{padding:"4px"},attrs:{plain:"",circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(e){return t.env.splice(l,1)}}})],1)],1)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.env.push({type:"value"})}}})],2),a("el-divider"),a("el-form-item",{attrs:{label:"存储挂载",prop:"volumeMounts"}},[t.volumeMounts.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("卷名称 ")])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("容器挂载路径 ")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[e._v(" 卷内部子路径 ")])])],1):e._e(),e._l(t.volumeMounts,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"0px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:6}},[a("div",{staticClass:"border-span-header"},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择存储卷名称"},model:{value:s.name,callback:function(t){e.$set(s,"name",t)},expression:"item.name"}},e._l(e.volumes,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:6}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"挂载路径，如：/data"},model:{value:s.mountPath,callback:function(t){e.$set(s,"mountPath",t)},expression:"item.mountPath"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:5}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"存储卷内部子路径"},model:{value:s.subPath,callback:function(t){e.$set(s,"subPath",t)},expression:"item.subPath"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{padding:"4px"},attrs:{plain:"",circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(e){return t.volumeMounts.splice(l,1)}}})],1)],1)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.volumeMounts.push({})}}})],2),a("el-divider"),a("el-form-item",{attrs:{label:"健康检查",prop:"livenessProbe"}},[a("el-switch",{model:{value:t.livenessProbe.probe,callback:function(a){e.$set(t.livenessProbe,"probe",a)},expression:"c.livenessProbe.probe"}}),t.livenessProbe.probe?a("health-probe",{attrs:{probe:t.livenessProbe}}):e._e()],1),a("el-form-item",{attrs:{label:"就绪检查",prop:"readinessProbe"}},[a("el-switch",{model:{value:t.readinessProbe.probe,callback:function(a){e.$set(t.readinessProbe,"probe",a)},expression:"c.readinessProbe.probe"}}),t.readinessProbe.probe?a("health-probe",{attrs:{probe:t.readinessProbe}}):e._e()],1),a("el-divider"),a("div",{staticClass:"border-header-class",on:{click:function(t){e.scShow=!e.scShow}}},[a("div",{staticClass:"border-icon-class"},[a("i",{class:e.scShow?"el-icon-arrow-down":"el-icon-arrow-right"})]),a("div",{staticClass:"border-content-class"},[a("span",[e._v("安全上下文")]),e._v(" "),a("br"),a("span",{staticStyle:{"font-size":".8em",color:"#8B959C"}},[e._v("对单个容器配置安全上下文")])])]),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.scShow,expression:"scShow"}]},[a("div",{staticClass:"border-transition-class"},[a("el-form",{attrs:{model:t,rules:e.containerRules,"label-width":"120px","label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"特权模式",prop:"privileged"}},[a("el-switch",{model:{value:t.securityContext.privileged,callback:function(a){e.$set(t.securityContext,"privileged",a)},expression:"c.securityContext.privileged"}})],1),a("el-form-item",{attrs:{label:"以用户ID运行",prop:"runAsUser"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"如：1001"},model:{value:t.securityContext.runAsUser,callback:function(a){e.$set(t.securityContext,"runAsUser",a)},expression:"c.securityContext.runAsUser"}})],1),a("el-form-item",{attrs:{label:"以用户组ID运行",prop:"runAsUser"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"如：1001"},model:{value:t.securityContext.runAsGroup,callback:function(a){e.$set(t.securityContext,"runAsGroup",a)},expression:"c.securityContext.runAsGroup"}})],1),a("el-form-item",{attrs:{label:"增加内核功能",prop:"capabilities"}},[a("div",{staticClass:"pnClass",staticStyle:{width:"400px"}},[a("el-select",{attrs:{multiple:"",placeholder:"",size:"small"},model:{value:t.securityContext.capabilities.add,callback:function(a){e.$set(t.securityContext.capabilities,"add",a)},expression:"c.securityContext.capabilities.add"}},e._l(e.capabilities,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),a("el-form-item",{attrs:{label:"移除内核功能",prop:"capabilities"}},[a("div",{staticClass:"pnClass",staticStyle:{width:"400px"}},[a("el-select",{attrs:{multiple:"",placeholder:"",size:"small"},model:{value:t.securityContext.capabilities.drop,callback:function(a){e.$set(t.securityContext.capabilities,"drop",a)},expression:"c.securityContext.capabilities.drop"}},e._l(e.capabilities,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),a("el-form-item",{attrs:{label:"以非root运行",prop:"runAsNonRoot"}},[a("el-switch",{model:{value:t.securityContext.runAsNonRoot,callback:function(a){e.$set(t.securityContext,"runAsNonRoot",a)},expression:"c.securityContext.runAsNonRoot"}})],1),a("el-form-item",{attrs:{label:"SELinux参数",prop:"seLinuxOptions"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-header",staticStyle:{color:"#8B959C"}},[e._v(" User ")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-header",staticStyle:{color:"#8B959C"}},[e._v(" Role ")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-header",staticStyle:{color:"#8B959C"}},[e._v(" Type ")])]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"item-header",staticStyle:{color:"#8B959C"}},[e._v(" Level ")])])],1),a("el-row",[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.securityContext.seLinuxOptions.user,callback:function(a){e.$set(t.securityContext.seLinuxOptions,"user",a)},expression:"c.securityContext.seLinuxOptions.user"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.securityContext.seLinuxOptions.role,callback:function(a){e.$set(t.securityContext.seLinuxOptions,"role",a)},expression:"c.securityContext.seLinuxOptions.role"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.securityContext.seLinuxOptions.type,callback:function(a){e.$set(t.securityContext.seLinuxOptions,"type",a)},expression:"c.securityContext.seLinuxOptions.type"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.securityContext.seLinuxOptions.level,callback:function(a){e.$set(t.securityContext.seLinuxOptions,"level",a)},expression:"c.securityContext.seLinuxOptions.level"}})],1)])],1)],1)],1)],1)])])],1)],1)})),a("el-tab-pane",{attrs:{label:"+",name:"plus"}},[a("span",{staticStyle:{"font-size":"18"},attrs:{slot:"label"},slot:"label"},[e._v("+")])])],2)],1)},y=[],g={name:"Container",components:{HealthProbe:b},data:function(){return{containerTabVal:"0",scShow:!1,containers:this.template.spec.template.spec.containers,volumes:this.template.spec.template.spec.volumes,containerRules:{name:[{required:!0,message:" ",trigger:["blur","change"]}],image:[{required:!0,message:" ",trigger:["blur","change"]}]},capabilities:["ALL","AUDIT_CONTROL","AUDIT_WRITE","BLOCK_SUSPEND","CHOWN","DAC_OVERRIDE","DAC_READ_SEARCH","FOWNER","FSETID","IPC_LOCK","IPC_OWNER","KILL","LEASE","LINUX_IMMUTABLE","MAC_ADMIN","MAC_OVERRIDE","MKNOD","NET_ADMIN","NET_BIND_SERVICE","NET_BROADCAST","NET_RAW","SETFCAP","SETGID","SETPCAP","SETUID","SYSLOGSYS_ADMIN","SYS_BOOT","SYS_CHROOT","SYS_MODULE","SYS_NICE","SYS_PACCT","SYS_PTRACE","SYS_RAWIO","SYS_RESOURCE","SYS_TIME","SYS_TTY_CONFIG","WAKE_ALARM"]}},props:["template","appResources"],computed:{appConfigmaps:function(){var e,t={},a=Object(r["a"])(this.appResources);try{for(a.s();!(e=a.n()).done;){var s=e.value;"ConfigMap"==s.kind&&s.metadata.name&&(t[s.metadata.name]=s)}}catch(l){a.e(l)}finally{a.f()}return t},appSecrets:function(){var e,t={},a=Object(r["a"])(this.appResources);try{for(a.s();!(e=a.n()).done;){var s=e.value;if("Secret"==s.kind&&s.metadata.name){var l=JSON.parse(JSON.stringify(s)),i=Object(c["e"])(l);i||(t[s.metadata.name]=l)}}}catch(o){a.e(o)}finally{a.f()}return t}},methods:{resData:function(e,t){if("configMap"==e){var a=[];return a=this.appConfigmaps[t]?this.appConfigmaps[t].data:[],a}var s={};return s=this.appSecrets[t]?this.appSecrets[t].data:{},s},addContainerTab:function(){var e=Ge();return this.containers.push(e),this.containerTabVal=this.containers.length-1+"",!1},containerTabClick:function(e){"plus"===e.name&&this.addContainerTab()},containerTabChange:function(e,t){return"plus"!==e&&(!(e>=this.containers.length+"")&&void 0)},containerTabRemove:function(e){var t=parseInt(e);if(this.containers.length<=1)return!1;var a=this.containerTabVal;t<parseInt(this.containerTabVal)?a=parseInt(this.containerTabVal)-1:t===parseInt(this.containerTabVal)&&(a=t-1,t<=0&&(a=0)),this.containers.splice(t,1),this.containerTabVal=a+""}}},x=g,S=(a("c1cf"),a("265a"),Object(f["a"])(x,h,y,!1,null,"3f2104ca",null)),k=S.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.volumes,(function(t,s){return["volumeClaimTemplates"!=t.type||"StatefulSet"==e.template.kind?a("el-card",{key:s,staticClass:"box-card",staticStyle:{"margin-bottom":"20px"},attrs:{"body-style":{padding:"0px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-form",{ref:"form",refInFor:!0,attrs:{model:t,rules:e.rules,"label-width":"0px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("卷名称 ")]),a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"卷名称，如：vol1"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"vol.name"}})],1)],1),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("卷类型 ")]),a("el-select",{staticClass:"input-class",attrs:{size:"small",placeholder:"卷类型"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"vol.type"}},["StatefulSet"==e.template.kind?a("el-option",{attrs:{label:"VolumeClaimTemplates",value:"volumeClaimTemplates"}}):e._e(),a("el-option",{attrs:{label:"PersistentVolumeClaim",value:"persistentVolumeClaim"}}),a("el-option",{attrs:{label:"HostPath",value:"hostPath"}}),a("el-option",{attrs:{label:"EmptyDir",value:"emptyDir"}}),a("el-option",{attrs:{label:"ConfigMap",value:"configMap"}}),a("el-option",{attrs:{label:"Secret",value:"secret"}}),a("el-option",{attrs:{label:"NFS",value:"nfs"}}),a("el-option",{attrs:{label:"Glusterfs",value:"glusterfs"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.volumes.splice(s,1)}}},[e._v("删除")])],1)],1)],1)],1),"emptyDir"!==t.type?a("div",{staticStyle:{padding:"20px"}},["persistentVolumeClaim"===t.type?a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("存储声明 ")]),a("el-select",{staticClass:"input-class",attrs:{size:"small",placeholder:"请选择存储声明"},model:{value:t["persistentVolumeClaim"].claimName,callback:function(a){e.$set(t["persistentVolumeClaim"],"claimName",a)},expression:"vol['persistentVolumeClaim'].claimName"}},e._l(e.nsPvcs,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.name,value:e.name}})})),1)],1)],1):e._e(),"hostPath"===t.type?a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("宿主机目录 ")]),a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"宿主机目录，如：/data"},model:{value:t["hostPath"].path,callback:function(a){e.$set(t["hostPath"],"path",a)},expression:"vol['hostPath'].path"}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[e._v("类型")]),a("el-select",{staticClass:"input-class",attrs:{size:"small",placeholder:"目录类型"},model:{value:t["hostPath"].type,callback:function(a){e.$set(t["hostPath"],"type",a)},expression:"vol['hostPath'].type"}},[a("el-option",{attrs:{label:"默认",value:""}}),a("el-option",{attrs:{label:"DirectoryOrCreate",value:"DirectoryOrCreate"}}),a("el-option",{attrs:{label:"Directory",value:"Directory"}}),a("el-option",{attrs:{label:"FileOrCreate",value:"FileOrCreate"}}),a("el-option",{attrs:{label:"File",value:"File"}}),a("el-option",{attrs:{label:"Socket",value:"Socket"}}),a("el-option",{attrs:{label:"CharDevice",value:"CharDevice"}}),a("el-option",{attrs:{label:"BlockDevice",value:"BlockDevice"}})],1)],1)],1):e._e(),"configMap"==t.type?a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v(e._s("configMap"===t.type?"配置映射":"密钥")+" ")]),a("el-select",{staticClass:"input-class",attrs:{"value-key":"name",size:"small",placeholder:"请选择"+t.type},model:{value:t[t.type].name,callback:function(a){e.$set(t[t.type],"name",a)},expression:"vol[vol.type].name"}},e._l(e.nsConfigmaps,(function(e,t){return a("el-option",{key:t,attrs:{label:e.metadata.name,value:e.metadata.name}})})),1)],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[e._v(" 默认模式 ")]),a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"创建文件的默认模式，默认为0644"},model:{value:t[t.type].defaultMode,callback:function(a){e.$set(t[t.type],"defaultMode",a)},expression:"vol[vol.type].defaultMode"}})],1)],1),t[t.type].items.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px","padding-top":"10px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("键 ")])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("路径 ")])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[e._v(" 模式 ")])])],1):e._e(),e._l(t[t.type].items,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"0px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"+t.type+"中的键"},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"item.key"}},e._l(e.nsConfigmaps[t[t.type].name]?e.nsConfigmaps[t[t.type].name].data:[],(function(e,t){return a("el-option",{key:t,attrs:{label:e.key,value:e.key}})})),1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"文件映射相对路径"},model:{value:s.path,callback:function(t){e.$set(s,"path",t)},expression:"item.path"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"文件模式"},model:{value:s.mode,callback:function(t){e.$set(s,"mode",t)},expression:"item.mode"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{padding:"5px","margin-top":"3px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(e){t[t.type].items.splice(l,1)}}})],1)],1)})),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{plain:"",size:"small"},on:{click:function(e){t[t.type].items.push({})}}},[e._v(" 添加指定文件项 ")])],2):e._e(),"secret"==t.type?a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v(e._s("configMap"===t.type?"配置映射":"密钥")+" ")]),a("el-select",{staticClass:"input-class",attrs:{"value-key":"name",size:"small",placeholder:"请选择"+t.type},model:{value:t[t.type].secretName,callback:function(a){e.$set(t[t.type],"secretName",a)},expression:"vol[vol.type].secretName"}},e._l(e.nsSecrets,(function(e,t){return a("el-option",{key:t,attrs:{label:e.metadata.name,value:e.metadata.name}})})),1)],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"border-span-header"},[e._v(" 默认模式 ")]),a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"创建文件的默认模式，默认为0644"},model:{value:t[t.type].defaultMode,callback:function(a){e.$set(t[t.type],"defaultMode",a)},expression:"vol[vol.type].defaultMode"}})],1)],1),t[t.type].items.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px","padding-top":"10px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("键 ")])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("路径 ")])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[e._v(" 模式 ")])])],1):e._e(),e._l(t[t.type].items,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"10px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"+t.type+"中的键"},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"item.key"}},e._l(e.nsSecrets[t[t.type].secretName]?e.nsSecrets[t[t.type].secretName].data:{},(function(e,t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"文件映射相对路径"},model:{value:s.path,callback:function(t){e.$set(s,"path",t)},expression:"item.path"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"文件模式"},model:{value:s.mode,callback:function(t){e.$set(s,"mode",t)},expression:"item.mode"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{padding:"5px","margin-top":"3px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(e){t[t.type].items.splice(l,1)}}})],1)],1)})),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{plain:"",size:"small"},on:{click:function(e){t[t.type].items.push({})}}},[e._v(" 添加指定文件项 ")])],2):e._e(),"nfs"===t.type?a("div",[a("el-row",[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("服务器地址 ")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"NFS服务器地址"},model:{value:t["nfs"].server,callback:function(a){e.$set(t["nfs"],"server",a)},expression:"vol['nfs'].server"}})],1),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("访问路径 ")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"NFS服务访问路径"},model:{value:t["nfs"].path,callback:function(a){e.$set(t["nfs"],"path",a)},expression:"vol['nfs'].path"}})],1),a("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:8}},[a("div",{staticClass:"border-span-header",staticStyle:{"margin-right":"25px"}},[e._v(" 只读 ")]),a("el-switch",{staticStyle:{"margin-top":"5px"},model:{value:t["nfs"].readOnly,callback:function(a){e.$set(t["nfs"],"readOnly",a)},expression:"vol['nfs'].readOnly"}})],1)],1)],1):e._e(),"glusterfs"===t.type?a("div",[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("端点名称 ")]),a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"Glusterfs端点名称"},model:{value:t["glusterfs"].endpoints,callback:function(a){e.$set(t["glusterfs"],"endpoints",a)},expression:"vol['glusterfs'].endpoints"}})],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("访问路径 ")]),a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"Glusterfs卷路径"},model:{value:t["glusterfs"].path,callback:function(a){e.$set(t["glusterfs"],"path",a)},expression:"vol['glusterfs'].path"}})],1),a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{color:"#8B959C","font-size":".85em","padding-bottom":"8px","margin-right":"25px"}},[e._v(" 只读 ")]),a("el-switch",{model:{value:t["glusterfs"].readOnly,callback:function(a){e.$set(t["glusterfs"],"readOnly",a)},expression:"vol['glusterfs'].readOnly"}})],1)],1)],1):e._e(),"volumeClaimTemplates"===t.type?a("div",[a("el-row",[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("访问模式 ")]),a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"访问模式",multiple:"",size:"small"},model:{value:t["volumeClaimTemplates"].accessModes,callback:function(a){e.$set(t["volumeClaimTemplates"],"accessModes",a)},expression:"vol['volumeClaimTemplates'].accessModes"}},[a("el-option",{attrs:{label:"ReadWriteOnce",value:"ReadWriteOnce"}}),a("el-option",{attrs:{label:"ReadWriteMany",value:"ReadWriteMany"}}),a("el-option",{attrs:{label:"ReadOnlyMany",value:"ReadOnlyMany"}})],1)],1),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[e._v(" 存储类 ")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"存储类"},model:{value:t["volumeClaimTemplates"].storageClassName,callback:function(a){e.$set(t["volumeClaimTemplates"],"storageClassName",a)},expression:"vol['volumeClaimTemplates'].storageClassName"}})],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("申请大小 ")]),a("el-input",{staticClass:"input-class",staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"存储卷申请大小"},model:{value:t["volumeClaimTemplates"].requests,callback:function(a){e.$set(t["volumeClaimTemplates"],"requests",a)},expression:"vol['volumeClaimTemplates'].requests"}},[a("span",{staticStyle:{"padding-right":"5px","margin-top":"5px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("Gi ")])])],1)],1)],1):e._e()],1):e._e()]):e._e()]})),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.volumes.push(e.newPodVolume())}}},[e._v("添加存储卷")])],2)},_=[],w={name:"PodVolume",components:{},data:function(){return{volumes:this.template.spec.template.spec.volumes,containerRules:{name:[{required:!0,message:" ",trigger:["blur","change"]}],image:[{required:!0,message:" ",trigger:["blur","change"]}]},rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template","appResources"],computed:{nsPvcs:function(){var e,t=[],a=Object(r["a"])(this.appResources);try{for(a.s();!(e=a.n()).done;){var s=e.value;"PersistentVolumeClaim"==s.kind&&s.metadata.name&&t.push({name:s.metadata.name})}}catch(l){a.e(l)}finally{a.f()}return t},nsConfigmaps:function(){var e,t={},a=Object(r["a"])(this.appResources);try{for(a.s();!(e=a.n()).done;){var s=e.value;"ConfigMap"==s.kind&&s.metadata.name&&(t[s.metadata.name]=s)}}catch(l){a.e(l)}finally{a.f()}return t},nsSecrets:function(){var e,t={},a=Object(r["a"])(this.appResources);try{for(a.s();!(e=a.n()).done;){var s=e.value;if("Secret"==s.kind&&s.metadata.name){var l=JSON.parse(JSON.stringify(s)),i=Object(c["e"])(l);i||(t[s.metadata.name]=l)}}}catch(o){a.e(o)}finally{a.f()}return t}},methods:{newPodVolume:Be}},P=w,z=(a("bee9"),Object(f["a"])(P,C,_,!1,null,"43576c5e",null)),O=z.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-div"},[a("el-form",{attrs:{model:e.podSpec,rules:e.rules,"label-width":"120px","label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"DNS策略",prop:"dnsPolicy"}},[a("el-select",{staticClass:"input-class",attrs:{size:"small"},model:{value:e.podSpec.dnsPolicy,callback:function(t){e.$set(e.podSpec,"dnsPolicy",t)},expression:"podSpec.dnsPolicy"}},[a("el-option",{attrs:{label:"ClusterFirst",value:"ClusterFirst"}}),a("el-option",{attrs:{label:"Default",value:"Default"}}),a("el-option",{attrs:{label:"ClusterFirstWithHostNet",value:"ClusterFirstWithHostNet"}}),a("el-option",{attrs:{label:"None",value:"None"}})],1)],1),a("el-form-item",{attrs:{label:"宿主机资源",prop:"hostResource"}},[a("el-checkbox",{model:{value:e.podSpec.hostNetwork,callback:function(t){e.$set(e.podSpec,"hostNetwork",t)},expression:"podSpec.hostNetwork"}},[e._v("HostNetwork")]),a("el-checkbox",{model:{value:e.podSpec.hostPID,callback:function(t){e.$set(e.podSpec,"hostPID",t)},expression:"podSpec.hostPID"}},[e._v("HostPID")]),a("el-checkbox",{model:{value:e.podSpec.hostIPC,callback:function(t){e.$set(e.podSpec,"hostIPC",t)},expression:"podSpec.hostIPC"}},[e._v("HostIPC")])],1),a("el-form-item",{attrs:{label:"主机名",prop:"hostname"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:""},model:{value:e.podSpec.hostname,callback:function(t){e.$set(e.podSpec,"hostname",t)},expression:"podSpec.hostname"}})],1),a("el-form-item",{attrs:{label:"子域名",prop:"subdomain"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:""},model:{value:e.podSpec.subdomain,callback:function(t){e.$set(e.podSpec,"subdomain",t)},expression:"podSpec.subdomain"}})],1),a("el-form-item",{staticStyle:{"font-size":"14px",color:"#99a9bf"},attrs:{label:"主机别名",prop:"hostAliases"}},[e.podSpec.hostAliases.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("主机名 ")])]),a("el-col",{attrs:{span:17}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("IP地址 ")])])],1):e._e(),e._l(e.podSpec.hostAliases,(function(t,s){return a("el-row",{key:s,staticStyle:{"padding-top":"10px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"如：foo.com"},model:{value:t.hostnames,callback:function(a){e.$set(t,"hostnames",a)},expression:"item.hostnames"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"如：1.1.1.1"},model:{value:t.ip,callback:function(a){e.$set(t,"ip",a)},expression:"item.ip"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{"padding-left":"10px","padding-right":"10px"},attrs:{plain:"",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.podSpec.hostAliases.splice(s,1)}}})],1)],1)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.podSpec.hostAliases.push({})}}})],2)],1)],1)},A=[],T={name:"PodNetwork",components:{},data:function(){return{podSpec:this.template.spec.template.spec,rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template"],computed:{},methods:{}},j=T,N=(a("887f"),Object(f["a"])(j,$,A,!1,null,"a6ab3006",null)),D=N.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-div",staticStyle:{"font-size":"14px",color:"#99a9bf"}},[a("el-form",{attrs:{model:e.podSpec,rules:e.rules,"label-width":"120px","label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"指定调度器",prop:"schedulerName"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"指定调度器名称"},model:{value:e.podSpec.schedulerName,callback:function(t){e.$set(e.podSpec,"schedulerName",t)},expression:"podSpec.schedulerName"}})],1),a("el-form-item",{attrs:{label:"选择节点标签",prop:"nodeSelector"}},[e.podSpec.nodeSelector.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("标签键 ")])]),a("el-col",{attrs:{span:17}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("标签值 ")])])],1):e._e(),e._l(e.podSpec.nodeSelector,(function(t,s){return a("el-row",{key:s,staticStyle:{"padding-top":"0px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"节点标签键"},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"item.key"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{attrs:{size:"small",placeholder:"节点标签值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(t){return e.podSpec.nodeSelector.splice(s,1)}}})],1)],1)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.podSpec.nodeSelector.push({})}}})],2),a("el-form-item",{attrs:{label:"污点容忍",prop:"toleration"}},[e.podSpec.tolerations.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[e._v(" 标签键 ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"border-span-header"},[e._v(" 运算符 ")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[e._v(" 标签值 ")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[e._v(" 影响 ")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"border-span-header"},[e._v(" 时间 ")])])],1):e._e(),e._l(e.podSpec.tolerations,(function(t,s){return a("el-row",{key:s,staticStyle:{"margin-bottom":"5px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"item.key"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:3}},[a("div",{staticClass:"item-content"},[a("el-select",{attrs:{size:"small"},model:{value:t.operator,callback:function(a){e.$set(t,"operator",a)},expression:"item.operator"}},[a("el-option",{attrs:{label:"等于",value:"Equal"}}),a("el-option",{attrs:{label:"存在",value:"Exists"}})],1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-select",{attrs:{size:"small"},model:{value:t.effect,callback:function(a){e.$set(t,"effect",a)},expression:"item.effect"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"不调度",value:"NoSchedule"}}),a("el-option",{attrs:{label:"倾向于不调度",value:"PreferNoSchedule"}}),a("el-option",{attrs:{label:"不执行",value:"NoExecute"}})],1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:2}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:"","controls-position":"right"},model:{value:t.tolerationSeconds,callback:function(a){e.$set(t,"tolerationSeconds",a)},expression:"item.tolerationSeconds"}},[a("template",{slot:"suffix"},[e._v(" 秒 ")])],2)],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(t){return e.podSpec.tolerations.splice(s,1)}}})],1)],1)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.podSpec.tolerations.push({})}}})],2),a("el-form-item",{attrs:{label:"节点亲和性",prop:"nodeAffinity"}},[e._l(e.podSpec.affinity.nodeAffinity,(function(t,s){return a("el-card",{key:s,staticClass:"box-card",staticStyle:{"margin-bottom":"20px"},attrs:{"body-style":{padding:"20px"}}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:"preferred"===t.type?9:22}},[a("div",{staticClass:"item-header"},[e._v(" 优先级 ")]),a("el-select",{staticClass:"input-class",attrs:{size:"small"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"aff.type"}},[a("el-option",{attrs:{label:"必须",value:"required"}}),a("el-option",{attrs:{label:"最好",value:"preferred"}})],1)],1),"preferred"===t.type?a("el-col",{attrs:{span:13}},[a("div",{staticClass:"item-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("权重 ")]),a("el-input-number",{attrs:{"controls-position":"right",size:"small",placeholder:"",max:100,min:1},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"aff.weight"}})],1):e._e(),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.podSpec.affinity.nodeAffinity.splice(s,1)}}},[e._v("删除")])],1)],1),t.nodeSelectorTerms.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"border-span-header"},[e._v(" 属性 ")])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[e._v(" 键 ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"border-span-header"},[e._v(" 运算符 ")])]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"border-span-header"},[e._v(" 值 ")])])],1):e._e(),e._l(t.nodeSelectorTerms,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"5px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:3}},[a("div",{staticClass:"item-content"},[a("el-select",{attrs:{size:"small"},model:{value:s.type,callback:function(t){e.$set(s,"type",t)},expression:"item.type"}},[a("el-option",{attrs:{label:"标签",value:"label"}}),a("el-option",{attrs:{label:"字段",value:"field"}})],1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"item.key"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:3}},[a("div",{staticClass:"item-content"},[a("el-select",{attrs:{size:"small"},model:{value:s.operator,callback:function(t){e.$set(s,"operator",t)},expression:"item.operator"}},[a("el-option",{attrs:{label:"In",value:"In"}}),a("el-option",{attrs:{label:"NotIn",value:"NotIn"}}),a("el-option",{attrs:{label:"Exists",value:"Exists"}}),a("el-option",{attrs:{label:"DoesNotExist",value:"DoesNotExist"}}),a("el-option",{attrs:{label:"Gt(>)",value:"Gt"}}),a("el-option",{attrs:{label:"Lt(<)",value:"Lt"}})],1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:"",disabled:["Exists","DoesNotExist"].indexOf(s.operator)>=0},model:{value:s.values,callback:function(t){e.$set(s,"values",t)},expression:"item.values"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(e){return t.nodeSelectorTerms.splice(l,1)}}})],1)],1)})),a("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.nodeSelectorTerms.push({type:"label",operator:"In"})}}},[e._v("添加规则")])],2)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.podSpec.affinity.nodeAffinity.push({type:"required",weight:1,nodeSelectorTerms:[]})}}})],2),a("el-form-item",{attrs:{label:"Pod亲和性",prop:"podAffinity"}},[e._l(e.podSpec.affinity.podAffinity,(function(t,s){return a("el-card",{key:s,staticClass:"box-card",staticStyle:{"margin-bottom":"20px"},attrs:{"body-style":{padding:"20px"}}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:9}},[a("div",{staticClass:"item-header"},[e._v(" 优先级 ")]),a("div",{staticClass:"pnClass",staticStyle:{"padding-right":"18px"}},[a("el-select",{attrs:{size:"small"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"aff.type"}},[a("el-option",{attrs:{label:"必须",value:"required"}}),a("el-option",{attrs:{label:"最好",value:"preferred"}})],1)],1)]),"preferred"===t.type?a("el-col",{attrs:{span:13}},[a("div",{staticClass:"item-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("权重 ")]),a("el-input-number",{attrs:{"controls-position":"right",size:"small",placeholder:"",max:100,min:1},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"aff.weight"}})],1):e._e(),a("el-col",{attrs:{span:"preferred"===t.type?2:15}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.podSpec.affinity.podAffinity.splice(s,1)}}},[e._v("删除")])],1)],1),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:9}},[a("div",{staticClass:"item-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("拓扑键 ")]),a("div",{staticStyle:{"padding-right":"18px"}},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.podAffinityTerm.topologyKey,callback:function(a){e.$set(t.podAffinityTerm,"topologyKey",a)},expression:"aff.podAffinityTerm.topologyKey"}})],1)]),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"item-header"},[e._v(" 命名空间 ")]),a("div",{staticClass:"pnClass",staticStyle:{"padding-right":"18px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",multiple:"",placeholder:"默认为空，表示当前命名空间",size:"small"},model:{value:t.podAffinityTerm.namespaces,callback:function(a){e.$set(t.podAffinityTerm,"namespaces",a)},expression:"aff.podAffinityTerm.namespaces"}},e._l(e.namespaces,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1)])],1),t.podAffinityTerm.labelSelector.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[e._v(" 标签键 ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"border-span-header"},[e._v(" 运算符 ")])]),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"border-span-header"},[e._v(" 标签值 ")])])],1):e._e(),e._l(t.podAffinityTerm.labelSelector,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"5px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"item.key"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:3}},[a("div",{staticClass:"item-content"},[a("el-select",{attrs:{size:"small"},model:{value:s.operator,callback:function(t){e.$set(s,"operator",t)},expression:"item.operator"}},[a("el-option",{attrs:{label:"Equal",value:"Equal"}}),a("el-option",{attrs:{label:"In",value:"In"}}),a("el-option",{attrs:{label:"NotIn",value:"NotIn"}}),a("el-option",{attrs:{label:"Exists",value:"Exists"}}),a("el-option",{attrs:{label:"DoesNotExist",value:"DoesNotExist"}})],1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:"",disabled:["Exists","DoesNotExist"].indexOf(s.operator)>=0},model:{value:s.values,callback:function(t){e.$set(s,"values",t)},expression:"item.values"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:3}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(e){return t.podAffinityTerm.labelSelector.splice(l,1)}}})],1)],1)})),a("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.podAffinityTerm.labelSelector.push({operator:"Equal"})}}},[e._v("添加规则")])],2)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.podSpec.affinity.podAffinity.push({type:"required",weight:1,podAffinityTerm:{labelSelector:[],namespaces:[]}})}}})],2),a("el-form-item",{attrs:{label:"Pod反亲和性",prop:"podAntiAffinity"}},[e._l(e.podSpec.affinity.podAntiAffinity,(function(t,s){return a("el-card",{key:s,staticClass:"box-card",staticStyle:{"margin-bottom":"20px"},attrs:{"body-style":{padding:"20px"}}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:9}},[a("div",{staticClass:"item-header"},[e._v(" 优先级 ")]),a("div",{staticClass:"pnClass",staticStyle:{"padding-right":"18px"}},[a("el-select",{attrs:{size:"small"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"aff.type"}},[a("el-option",{attrs:{label:"必须",value:"required"}}),a("el-option",{attrs:{label:"最好",value:"preferred"}})],1)],1)]),"preferred"===t.type?a("el-col",{attrs:{span:13}},[a("div",{staticClass:"item-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("权重 ")]),a("el-input-number",{attrs:{"controls-position":"right",size:"small",placeholder:"",max:100,min:1},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"aff.weight"}})],1):e._e(),a("el-col",{attrs:{span:"preferred"===t.type?2:15}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.podSpec.affinity.podAntiAffinity.splice(s,1)}}},[e._v("删除")])],1)],1),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:9}},[a("div",{staticClass:"item-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("拓扑键 ")]),a("div",{staticStyle:{"padding-right":"18px"}},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:t.podAffinityTerm.topologyKey,callback:function(a){e.$set(t.podAffinityTerm,"topologyKey",a)},expression:"aff.podAffinityTerm.topologyKey"}})],1)]),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"item-header"},[e._v(" 命名空间 ")]),a("div",{staticClass:"pnClass",staticStyle:{"padding-right":"18px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",multiple:"",placeholder:"默认为空，表示当前命名空间",size:"small"},model:{value:t.podAffinityTerm.namespaces,callback:function(a){e.$set(t.podAffinityTerm,"namespaces",a)},expression:"aff.podAffinityTerm.namespaces"}},e._l(e.namespaces,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1)])],1),t.podAffinityTerm.labelSelector.length>0?a("el-row",{staticStyle:{"margin-bottom":"-15px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[e._v(" 标签键 ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"border-span-header"},[e._v(" 运算符 ")])]),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"border-span-header"},[e._v(" 标签值 ")])])],1):e._e(),e._l(t.podAffinityTerm.labelSelector,(function(s,l){return a("el-row",{key:l,staticStyle:{"padding-top":"5px"}},[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"item.key"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:3}},[a("div",{staticClass:"item-content"},[a("el-select",{attrs:{size:"small"},model:{value:s.operator,callback:function(t){e.$set(s,"operator",t)},expression:"item.operator"}},[a("el-option",{attrs:{label:"Equal",value:"Equal"}}),a("el-option",{attrs:{label:"In",value:"In"}}),a("el-option",{attrs:{label:"NotIn",value:"NotIn"}}),a("el-option",{attrs:{label:"Exists",value:"Exists"}}),a("el-option",{attrs:{label:"DoesNotExist",value:"DoesNotExist"}})],1)],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:7}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:"",disabled:["Exists","DoesNotExist"].indexOf(s.operator)>=0},model:{value:s.values,callback:function(t){e.$set(s,"values",t)},expression:"item.values"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:3}},[a("el-button",{staticStyle:{"padding-left":"10px","padding-right":"10px"},attrs:{plain:"",size:"mini",icon:"el-icon-minus"},on:{click:function(e){return t.podAffinityTerm.labelSelector.splice(l,1)}}})],1)],1)})),a("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.podAffinityTerm.labelSelector.push({operator:"Equal"})}}},[e._v("添加规则")])],2)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.podSpec.affinity.podAntiAffinity.push({type:"required",weight:1,podAffinityTerm:{labelSelector:[],namespaces:[]}})}}})],2)],1)],1)},E=[],q={name:"PodAffinity",components:{},data:function(){return{podSpec:this.template.spec.template.spec,rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]},nodes:[],namespaces:[]}},props:["template"],computed:{},methods:{}},M=q,R=(a("958e"),Object(f["a"])(M,I,E,!1,null,"16a1af65",null)),V=R.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-div",staticStyle:{"font-size":"14px",color:"#99a9bf"}},[a("el-form",{attrs:{model:e.podSpec,rules:e.rules,"label-width":"120px","label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"以用户ID运行",prop:"runAsUser"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"如：1001"},model:{value:e.podSpec.securityContext.runAsUser,callback:function(t){e.$set(e.podSpec.securityContext,"runAsUser",t)},expression:"podSpec.securityContext.runAsUser"}})],1),a("el-form-item",{attrs:{label:"以用户组ID运行",prop:"runAsUser"}},[a("el-input",{staticClass:"input-class",attrs:{size:"small",placeholder:"如：1001"},model:{value:e.podSpec.securityContext.runAsGroup,callback:function(t){e.$set(e.podSpec.securityContext,"runAsGroup",t)},expression:"podSpec.securityContext.runAsGroup"}})],1),a("el-form-item",{attrs:{label:"以非root运行",prop:"runAsNonRoot"}},[a("el-switch",{model:{value:e.podSpec.securityContext.runAsNonRoot,callback:function(t){e.$set(e.podSpec.securityContext,"runAsNonRoot",t)},expression:"podSpec.securityContext.runAsNonRoot"}})],1),a("el-form-item",{attrs:{label:"sysctls",prop:"sysctls"}},[e._l(e.podSpec.securityContext.sysctls,(function(t,s){return a("div",{key:s,staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"name"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"l.name"}}),e._v(" = "),a("el-input",{staticClass:"input-class",attrs:{placeholder:"value"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"l.value"}}),a("el-button",{staticStyle:{"margin-left":"10px","padding-left":"10px","padding-right":"10px"},attrs:{plain:"",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.podSpec.securityContext.sysctls.splice(s,1)}}})],1)})),a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.podSpec.securityContext.sysctls.push({})}}})],2),a("el-form-item",{attrs:{label:"SELinux参数",prop:"seLinuxOptions"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-header"},[e._v(" User ")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-header"},[e._v(" Role ")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-header"},[e._v(" Type ")])]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"item-header"},[e._v(" Level ")])])],1),a("el-row",[a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:e.podSpec.securityContext.seLinuxOptions.user,callback:function(t){e.$set(e.podSpec.securityContext.seLinuxOptions,"user",t)},expression:"podSpec.securityContext.seLinuxOptions.user"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:e.podSpec.securityContext.seLinuxOptions.role,callback:function(t){e.$set(e.podSpec.securityContext.seLinuxOptions,"role",t)},expression:"podSpec.securityContext.seLinuxOptions.role"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:e.podSpec.securityContext.seLinuxOptions.type,callback:function(t){e.$set(e.podSpec.securityContext.seLinuxOptions,"type",t)},expression:"podSpec.securityContext.seLinuxOptions.type"}})],1)]),a("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:4}},[a("div",{staticClass:"item-content"},[a("el-input",{attrs:{size:"small",placeholder:""},model:{value:e.podSpec.securityContext.seLinuxOptions.level,callback:function(t){e.$set(e.podSpec.securityContext.seLinuxOptions,"level",t)},expression:"podSpec.securityContext.seLinuxOptions.level"}})],1)])],1)],1)],1)],1)},F=[],U={name:"PodNetwork",components:{},data:function(){return{podSpec:this.template.spec.template.spec,rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template"],computed:{},methods:{}},J=U,B=(a("6c56"),Object(f["a"])(J,L,F,!1,null,"3e279be2",null)),G=B.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"template-class"},[a("el-form",{staticStyle:{padding:"10px 20px"},attrs:{"label-position":"left",model:e.template.metadata,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"负载名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入工作负载名称",size:"small"},model:{value:e.template.metadata.name,callback:function(t){e.$set(e.template.metadata,"name",t)},expression:"template.metadata.name"}})],1),a("el-form-item",{staticStyle:{width:"700px"},attrs:{label:"负载类型",prop:"",required:""}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.template.kind,callback:function(t){e.$set(e.template,"kind",t)},expression:"template.kind"}},[a("el-radio-button",{attrs:{label:"Deployment"}}),a("el-radio-button",{attrs:{label:"StatefulSet"}}),a("el-radio-button",{attrs:{label:"DaemonSet"}}),a("el-radio-button",{attrs:{label:"CronJob"}}),a("el-radio-button",{attrs:{label:"Job"}})],1)],1),"Deployment"==e.template.kind||"StatefulSet"==e.template.kind?a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"副本数",required:""}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:1,label:"描述文字"},model:{value:e.template.spec.replicas,callback:function(t){e.$set(e.template.spec,"replicas",t)},expression:"template.spec.replicas"}})],1):e._e(),"Deployment"==e.template.kind?a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"更新策略",required:""}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("更新策略 "),a("el-link",{attrs:{icon:"el-icon-question",underline:!1,target:"_blank",href:"https://kubernetes.io/zh/docs/concepts/workloads/controllers/deployment/#strategy"}})],1),a("el-radio-group",{attrs:{size:"small",name:"strategy"},model:{value:e.template.spec.strategy.type,callback:function(t){e.$set(e.template.spec.strategy,"type",t)},expression:"template.spec.strategy.type"}},[a("el-radio-button",{attrs:{label:"RollingUpdate"}}),a("el-radio-button",{attrs:{label:"Recreate"}})],1),"RollingUpdate"==e.template.spec.strategy.type?a("div",{staticStyle:{"margin-top":"10px",color:"#99a9bf","line-height":"1"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",min:1},model:{value:e.template.spec.strategy.maxUnavailable,callback:function(t){e.$set(e.template.spec.strategy,"maxUnavailable",t)},expression:"template.spec.strategy.maxUnavailable"}},[a("template",{slot:"prepend"},[e._v("最大不可用")])],2),a("el-input",{staticStyle:{width:"185px","margin-left":"10px"},attrs:{size:"small",min:1},model:{value:e.template.spec.strategy.maxUnavailable,callback:function(t){e.$set(e.template.spec.strategy,"maxUnavailable",t)},expression:"template.spec.strategy.maxUnavailable"}},[a("template",{slot:"prepend"},[e._v("最大峰值")])],2)],1):e._e()],1):e._e(),"CronJob"==e.template.kind?a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"定时配置",required:""}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("定时配置 "),a("el-link",{attrs:{icon:"el-icon-question",underline:!1,target:"_blank",href:"https://kubernetes.io/zh/docs/concepts/workloads/controllers/cron-jobs/#cron-%E6%97%B6%E9%97%B4%E8%A1%A8%E8%AF%AD%E6%B3%95"}})],1),a("el-input",{attrs:{placeholder:"请输入Cron定时配置",size:"small"},model:{value:e.template.spec.job.schedule,callback:function(t){e.$set(e.template.spec.job,"schedule",t)},expression:"template.spec.job.schedule"}})],1):e._e(),"CronJob"==e.template.kind?a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"并发策略"}},[a("el-radio-group",{attrs:{size:"small",name:"concurrencyPolicy"},model:{value:e.template.spec.job.concurrencyPolicy,callback:function(t){e.$set(e.template.spec.job,"concurrencyPolicy",t)},expression:"template.spec.job.concurrencyPolicy"}},[a("el-radio-button",{attrs:{label:"Allow"}}),a("el-radio-button",{attrs:{label:"Forbid"}}),a("el-radio-button",{attrs:{label:"Replace"}})],1)],1):e._e(),"CronJob"==e.template.kind||"Job"==e.template.kind?a("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"Job配置"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("Job配置 "),a("el-link",{attrs:{icon:"el-icon-question",underline:!1,target:"_blank",href:"https://kubernetes.io/zh/docs/concepts/workloads/controllers/job/#parallel-jobs"}})],1),a("el-row",[a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:6}},[a("div",{staticStyle:{color:"#8B959C","padding-bottom":"0px","line-height":"24px","margin-top":"0px"}},[e._v(" 重试次数 ")]),a("el-input-number",{attrs:{size:"small",placeholder:"默认为10"},model:{value:e.template.spec.job.backoffLimit,callback:function(t){e.$set(e.template.spec.job,"backoffLimit",t)},expression:"template.spec.job.backoffLimit"}},[a("template",{slot:"suffix"},[e._v("次")])],2)],1),a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:6}},[a("div",{staticStyle:{color:"#8B959C","padding-bottom":"0px","line-height":"24px","margin-top":"0px"}},[e._v(" 并发数 ")]),a("el-input-number",{attrs:{size:"small",placeholder:""},model:{value:e.template.spec.job.completions,callback:function(t){e.$set(e.template.spec.job,"completions",t)},expression:"template.spec.job.completions"}},[a("template",{slot:"suffix"})],2)],1),a("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:6}},[a("div",{staticStyle:{color:"#8B959C","padding-bottom":"0px","line-height":"24px","margin-top":"0px"}},[e._v(" 完成数 ")]),a("el-input-number",{attrs:{size:"small",placeholder:""},model:{value:e.template.spec.job.parallelism,callback:function(t){e.$set(e.template.spec.job,"parallelism",t)},expression:"template.spec.job.parallelism"}},[a("template",{slot:"suffix"},[e._v("秒")])],2)],1)],1)],1):e._e()],1),a("el-tabs",{attrs:{"tab-position":"left",value:"container"}},[a("el-tab-pane",{attrs:{label:"容器组",name:"container"}},[a("container",{attrs:{template:e.template,appResources:e.appResources}})],1),a("el-tab-pane",{attrs:{label:"存储"}},[a("div",{staticClass:"border-workload-content"},[a("pod-volume",{attrs:{template:e.template,appResources:e.appResources}})],1)]),a("el-tab-pane",{attrs:{label:"网络"}},[a("div",{staticClass:"border-workload-content"},[a("pod-network",{attrs:{template:e.template}})],1)]),a("el-tab-pane",{attrs:{label:"调度"}},[a("div",{staticClass:"border-workload-content"},[a("pod-affinity",{attrs:{template:e.template}})],1)]),a("el-tab-pane",{attrs:{label:"安全"}},[a("div",{staticClass:"border-workload-content"},[a("pod-security",{attrs:{template:e.template}})],1)])],1)],1)},H=[],W={name:"Workload",components:{Container:k,PodVolume:O,PodNetwork:D,PodAffinity:V,PodSecurity:G},data:function(){return{rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template","noName","appResources"],computed:{},methods:{}},Y=W,X=(a("0405"),a("0626"),Object(f["a"])(Y,K,H,!1,null,"175c05e8",null)),Q=X.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"template-class"},[a("el-form",{staticStyle:{padding:"10px 20px 10px",color:"#909399"},attrs:{"label-position":"left",model:e.template.metadata,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"服务名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入服务名称",size:"small"},model:{value:e.template.metadata.name,callback:function(t){e.$set(e.template.metadata,"name",t)},expression:"template.metadata.name"}})],1),a("el-form-item",{staticStyle:{width:"700px"},attrs:{label:"服务类型",prop:"",required:""}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.template.spec.type,callback:function(t){e.$set(e.template.spec,"type",t)},expression:"template.spec.type"}},[a("el-radio-button",{attrs:{label:"ClusterIP"}}),a("el-radio-button",{attrs:{label:"NodePort"}}),a("el-radio-button",{attrs:{label:"LoadBalancer"}}),a("el-radio-button",{attrs:{label:"ExternalName"}})],1)],1),a("el-form-item",{attrs:{label:"端口配置",required:""}},[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-top":"8px"}},[a("el-col",{staticStyle:{"background-color":"#F5F7FA","padding-left":"10px"},attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("容器端口 ")])]),a("el-col",{staticStyle:{"background-color":"#F5F7FA"},attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[e._v(" 名称 ")])]),a("el-col",{staticStyle:{"background-color":"#F5F7FA"},attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("服务端口 ")])]),"NodePort"==e.template.spec.type?a("el-col",{staticStyle:{"background-color":"#F5F7FA"},attrs:{span:4}},[e._v(" NodePort ")]):e._e(),a("el-col",{staticStyle:{"background-color":"#F5F7FA"},attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[e._v(" 协议 ")])])],1),e._l(e.template.spec.ports,(function(t,s){return a("el-row",{key:s,staticStyle:{"padding-top":"0px"}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[a("el-select",{staticStyle:{width:"100%","padding-right":"10px"},attrs:{placeholder:"容器访问端口",size:"small"},model:{value:t.targetPort,callback:function(a){e.$set(t,"targetPort",a)},expression:"item.targetPort"}},e._l(e.containerPorts,(function(e){return a("el-option",{key:e.containerPort,attrs:{label:e.containerPort,value:e.containerPort}})})),1)],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"服务端口名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"服务暴露端口"},model:{value:t.port,callback:function(a){e.$set(t,"port",a)},expression:"item.port"}})],1)]),"NodePort"==e.template.spec.type?a("el-col",{attrs:{span:4}},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"宿主机暴露端口"},model:{value:t.nodePort,callback:function(a){e.$set(t,"nodePort",a)},expression:"item.nodePort"}})],1):e._e(),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"border-span-header"},[a("el-select",{attrs:{placeholder:"端口所属协议",size:"small"},model:{value:t.protocol,callback:function(a){e.$set(t,"protocol",a)},expression:"item.protocol"}},[a("el-option",{attrs:{label:"TCP",value:"TCP"}}),a("el-option",{attrs:{label:"UDP",value:"UDP"}}),a("el-option",{attrs:{label:"SCTP",value:"SCTP"}})],1)],1)]),a("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:2}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(t){return e.template.spec.ports.splice(s,1)}}})],1)],1)})),a("el-row",[a("el-col",{attrs:{span:"NodePort"==e.template.spec.type?20:16}},[a("el-button",{staticStyle:{width:"100%","border-radius":"0px",padding:"9px 15px","border-color":"rgb(102, 177, 255)",color:"rgb(102, 177, 255)"},attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.template.spec.ports.push({protocol:"TCP"})}}},[e._v("添加服务端口")])],1)],1)],2)],1),a("el-form",{staticStyle:{padding:"0px 25px",color:"#909399"},attrs:{"label-position":"left","label-width":"0"}})],1)},ee=[],te={name:"Service",components:{},data:function(){return{rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template","containers"],computed:{containerPorts:function(){var e,t=[],a=Object(r["a"])(this.containers);try{for(a.s();!(e=a.n()).done;){var s,l=e.value,i=Object(r["a"])(l.ports);try{for(i.s();!(s=i.n()).done;){var o=s.value;t.push(o)}}catch(n){i.e(n)}finally{i.f()}}}catch(n){a.e(n)}finally{a.f()}return console.log(t),t}},methods:{}},ae=te,se=(a("9b0a"),Object(f["a"])(ae,Z,ee,!1,null,"6801e89a",null)),le=se.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"template-class"},[a("el-form",{staticStyle:{padding:"10px 20px 10px",color:"#909399"},attrs:{"label-position":"left",model:e.template.metadata,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"只能包含小写字母数字以及-和.,数字或者字母开头或结尾",size:"small"},model:{value:e.template.metadata.name,callback:function(t){e.$set(e.template.metadata,"name",t)},expression:"template.metadata.name"}})],1),a("el-form-item",{attrs:{label:"配置项",required:""}},[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-top":"8px"}},[a("el-col",{staticStyle:{"background-color":"#F5F7FA","padding-left":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("Key ")])]),a("el-col",{staticStyle:{"background-color":"#F5F7FA"},attrs:{span:10}},[a("div",{staticClass:"border-span-header"},[e._v(" Value ")])])],1),e._l(e.template.data,(function(t,s){return a("el-row",{key:s,staticStyle:{"padding-bottom":"5px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"配置项Key"},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"d.key"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"border-radius":"0px"},attrs:{type:"textarea",size:"small",placeholder:"配置项Value"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"d.value"}})],1)]),a("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:2}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(t){return e.template.data.splice(s,1)}}})],1)],1)})),a("el-row",[a("el-col",{attrs:{span:17}},[a("el-button",{staticStyle:{width:"100%","border-radius":"0px",padding:"9px 15px","border-color":"rgb(102, 177, 255)",color:"rgb(102, 177, 255)"},attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.template.data.push({})}}},[e._v("添加配置项")])],1)],1)],2)],1)],1)},ie=[],oe={name:"ConfigMap",components:{},data:function(){return{rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template"],computed:{},methods:{}},ne=oe,ce=(a("7952"),Object(f["a"])(ne,re,ie,!1,null,"4575c1fc",null)),pe=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"template-class"},[a("el-form",{staticStyle:{padding:"10px 20px 10px",color:"#909399"},attrs:{"label-position":"left",model:e.template.metadata,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"只能包含小写字母数字以及-和.,数字或者字母开头或结尾",size:"small"},model:{value:e.template.metadata.name,callback:function(t){e.$set(e.template.metadata,"name",t)},expression:"template.metadata.name"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"类型",prop:"name"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.template.type,callback:function(t){e.$set(e.template,"type",t)},expression:"template.type"}},[a("el-radio-button",{attrs:{label:"Opaque"}},[e._v("Opaque")]),a("el-radio-button",{attrs:{label:"kubernetes.io/tls"}},[e._v("TLS")]),a("el-radio-button",{attrs:{label:"kubernetes.io/basic-auth"}},[e._v("用户名/密码")]),a("el-radio-button",{attrs:{label:"kubernetes.io/dockerconfigjson"}},[e._v("镜像服务")])],1)],1),"Opaque"==e.template.type?a("el-form-item",{attrs:{label:"配置项",required:""}},[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-top":"8px"}},[a("el-col",{staticStyle:{"background-color":"#F5F7FA","padding-left":"10px"},attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("span",{staticClass:"border-span-content"},[e._v("*")]),e._v("Key ")])]),a("el-col",{staticStyle:{"background-color":"#F5F7FA"},attrs:{span:10}},[a("div",{staticClass:"border-span-header"},[e._v(" Value ")])])],1),e._l(e.template.data,(function(t,s){return a("el-row",{key:s,staticStyle:{"padding-bottom":"5px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"配置项Key"},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"d.key"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"border-span-header"},[a("el-input",{staticStyle:{"border-radius":"0px"},attrs:{type:"textarea",size:"small",placeholder:"配置项Value"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"d.value"}})],1)]),a("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:2}},[a("el-button",{staticStyle:{padding:"5px"},attrs:{circle:"",size:"mini",icon:"el-icon-close"},on:{click:function(t){return e.template.data.splice(s,1)}}})],1)],1)})),a("el-row",[a("el-col",{attrs:{span:17}},[a("el-button",{staticStyle:{width:"100%","border-radius":"0px",padding:"9px 15px","border-color":"rgb(102, 177, 255)",color:"rgb(102, 177, 255)"},attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.template.data.push({})}}},[e._v("添加配置项")])],1)],1)],2):e._e(),"kubernetes.io/tls"==e.template.type?a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"证书",required:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"",size:"small"},model:{value:e.template.tls.crt,callback:function(t){e.$set(e.template.tls,"crt",t)},expression:"template.tls.crt"}})],1):e._e(),"kubernetes.io/tls"==e.template.type?a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"密钥",required:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"",size:"small"},model:{value:e.template.tls.key,callback:function(t){e.$set(e.template.tls,"key",t)},expression:"template.tls.key"}})],1):e._e(),"kubernetes.io/basic-auth"==e.template.type?a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"用户",required:""}},[a("el-input",{attrs:{placeholder:"",size:"small"},model:{value:e.template.userPass.username,callback:function(t){e.$set(e.template.userPass,"username",t)},expression:"template.userPass.username"}})],1):e._e(),"kubernetes.io/basic-auth"==e.template.type?a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"密码",required:""}},[a("el-input",{attrs:{type:"password",autocomplete:"new-password",placeholder:"",size:"small"},model:{value:e.template.userPass.password,callback:function(t){e.$set(e.template.userPass,"password",t)},expression:"template.userPass.password"}})],1):e._e(),"kubernetes.io/dockerconfigjson"==e.template.type?a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"仓库地址",required:""}},[a("el-input",{attrs:{placeholder:"镜像仓库地址",size:"small"},model:{value:e.template.imagePass.url,callback:function(t){e.$set(e.template.imagePass,"url",t)},expression:"template.imagePass.url"}})],1):e._e(),"kubernetes.io/dockerconfigjson"==e.template.type?a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"用户",required:""}},[a("el-input",{attrs:{placeholder:"镜像仓库认证用户",size:"small"},model:{value:e.template.imagePass.username,callback:function(t){e.$set(e.template.imagePass,"username",t)},expression:"template.imagePass.username"}})],1):e._e(),"kubernetes.io/dockerconfigjson"==e.template.type?a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"密码",required:""}},[a("el-input",{attrs:{type:"password",autocomplete:"new-password",placeholder:"镜像仓库认证密码",size:"small"},model:{value:e.template.imagePass.password,callback:function(t){e.$set(e.template.imagePass,"password",t)},expression:"template.imagePass.password"}})],1):e._e(),"kubernetes.io/dockerconfigjson"==e.template.type?a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"邮箱",required:""}},[a("el-input",{attrs:{placeholder:"用户邮箱",size:"small"},model:{value:e.template.imagePass.email,callback:function(t){e.$set(e.template.imagePass,"email",t)},expression:"template.imagePass.email"}})],1):e._e()],1)],1)},ue=[],me={name:"Secret",components:{},data:function(){return{rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template"],computed:{},methods:{}},fe=me,ve=(a("0868"),Object(f["a"])(fe,de,ue,!1,null,"e9d86516",null)),be=ve.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"template-class"},[a("el-form",{staticStyle:{padding:"10px 20px 10px",color:"#909399"},attrs:{"label-position":"left",model:e.template.metadata,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"只能包含小写字母数字以及-和.,数字或者字母开头或结尾",size:"small"},model:{value:e.template.metadata.name,callback:function(t){e.$set(e.template.metadata,"name",t)},expression:"template.metadata.name"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"申请大小",required:""}},[a("el-input",{staticStyle:{width:"139px"},attrs:{placeholder:"存储卷申请大小",size:"small"},model:{value:e.template.spec.resources.requests.storage,callback:function(t){e.$set(e.template.spec.resources.requests,"storage",t)},expression:"template.spec.resources.requests.storage"}},[a("span",{staticStyle:{"padding-right":"5px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("Gi ")])])],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"访问模式"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"访问模式",multiple:"",size:"small"},model:{value:e.template.spec.accessModes,callback:function(t){e.$set(e.template.spec,"accessModes",t)},expression:"template.spec.accessModes"}},[a("el-option",{attrs:{label:"ReadWriteOnce",value:"ReadWriteOnce"}}),a("el-option",{attrs:{label:"ReadWriteMany",value:"ReadWriteMany"}}),a("el-option",{attrs:{label:"ReadOnlyMany",value:"ReadOnlyMany"}})],1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"存储类"}},[a("el-input",{attrs:{placeholder:"存储类",size:"small"},model:{value:e.template.spec.storageClassName,callback:function(t){e.$set(e.template.spec,"storageClassName",t)},expression:"template.spec.storageClassName"}})],1)],1)],1)},ye=[],ge={name:"pvc",components:{},data:function(){return{rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}]}}},props:["template"],computed:{},methods:{}},xe=ge,Se=(a("efc9"),Object(f["a"])(xe,he,ye,!1,null,"1881220c",null)),ke=Se.exports;function Ce(e){return"Workload"==e?He():"Service"==e?We():"ConfigMap"==e?Xe():"Secret"==e?et():"PersistentVolumeClaim"==e?pt():void 0}function _e(e,t){var a=JSON.parse(JSON.stringify(e));return a?a.kind?a.metadata?a.metadata.name?(a.metadata.labels["kubespace.cn/app"]=t,["Deployment","StatefulSet","DaemonSet","CronJob","Job"].indexOf(a.kind)>-1?we(a):"Service"==a.kind?Ye(a):"ConfigMap"==a.kind?Qe(a):"Secret"==a.kind?tt(a):"PersistentVolumeClaim"==a.kind?dt(a):{err:"".concat(a.kind,"/").concat(a.metadata.name,"未找到对应的资源类型")}):{err:"应用资源名称为空"}:{err:"应用资源metadata为空"}:{err:"应用资源kind为空"}:{err:"应用资源为空"}}function we(e){if(e.apiVersion="apps/v1",!e.spec.template.spec.containers||e.spec.template.spec.containers.length<=0)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"容器为空")};if("Job"!=e.kind&&"CronJob"!=e.kind?(e.spec.selector.matchLabels["kubespace.cn/app"]=e.metadata.name,e.spec.template.metadata.labels["kubespace.cn/app"]=e.metadata.name):(void 0!=e.spec.selector&&delete e.spec.selector,void 0!=e.spec.template.metadata&&delete e.spec.template.metadata),"Deployment"==e.kind){var t={};t="RollingUpdate"==e.spec.strategy.type?{type:"RollingUpdate",rollingUpdate:{maxUnavailable:e.spec.strategy.maxUnavailable,maxSurge:e.spec.strategy.maxSurge}}:{type:"Recreate"},e.spec.strategy=t}else void 0!=e.spec.strategy&&delete e.spec.strategy;"Deployment"!=e.kind&&"StatefulSet"!=e.kind&&delete e.spec.replicas;var a=$e(e);if(a)return a;if(a=Ie(e),a)return a;if(a=Oe(e),a)return a;if(a=qe(e),a)return a;if("CronJob"!=e.kind&&"Job"!=e.kind)void 0!=e.spec.job&&delete e.spec.job,e.spec.template.spec.restartPolicy&&delete e.spec.template.spec.restartPolicy;else if(e.spec.template.spec.restartPolicy="OnFailure","Job"==e.kind){if(a=Pe(e),a)return a}else if("CronJob"==e.kind&&(a=ze(e),a))return a;return{tpl:e}}function Pe(e){"Job"==e.kind&&(e.apiVersion="batch/v1beta1",e.spec.job&&(e.spec.job.backoffLimit&&(e.spec.backoffLimit=e.spec.job.backoffLimit),e.spec.job.completions&&(e.spec.completions=e.spec.job.completions),e.spec.job.parallelism&&(e.spec.parallelism=e.spec.job.parallelism),delete e.spec.job))}function ze(e){if("CronJob"==e.kind){e.apiVersion="batch/v1beta1";var t={jobTemplate:{spec:{}}};if(e.spec.job&&(e.spec.job.backoffLimit&&(e.spec.backoffLimit=e.spec.job.backoffLimit),e.spec.job.completions&&(e.spec.completions=e.spec.job.completions),e.spec.job.parallelism&&(e.spec.parallelism=e.spec.job.parallelism),e.spec.job.schedule&&(t.schedule=e.spec.job.schedule),e.spec.job.concurrencyPolicy&&(t.concurrencyPolicy=e.spec.job.concurrencyPolicy)),!t.schedule)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"定时为空")};delete e.spec.job,e.spec.template.metadata={labels:{"kubespace.cn/app":e.metadata.name}},t.jobTemplate.spec=e.spec,e.spec=t}}function Oe(e){if(e.spec.template.spec.hostAliases.length>0){var t,a=Object(r["a"])(e.spec.template.spec.hostAliases);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!s.hostnames)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"主机别名域名为空")};if(!s.ip)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"主机别名ip为空")};s.hostnames=[s.hostnames]}}catch(l){a.e(l)}finally{a.f()}}}function $e(e){var t,a=[],s=[],l="",i=Object(r["a"])(e.spec.template.spec.containers);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(!o.name)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"容器名称为空")};if(!o.image)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"中容器镜像为空")};var n=je(o.livenessProbe);if(n[1])return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"中容器").concat(n[1])};if(n[0]?o.livenessProbe=n[0]:delete o.livenessProbe,n=je(o.readinessProbe),n[1])return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"中容器").concat(n[1])};if(n[0]?o.readinessProbe=n[0]:delete o.readinessProbe,o.command)try{o.command=JSON.parse(o.command)}catch(u){o.command=[o.command]}else o.command=[];if(o.args)try{o.args=JSON.parse(o.args)}catch(u){o.args=[o.args]}else o.args=[];o.securityContext.runAsUser&&(o.securityContext.runAsUser=parseInt(o.securityContext.runAsUser)),o.securityContext.runAsGroup&&(o.securityContext.runAsGroup=parseInt(o.securityContext.runAsGroup));var c,p=Object(r["a"])(o.ports);try{for(p.s();!(c=p.n()).done;){var d=c.value;if(!d.containerPort)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"容器端口为空")};try{d.containerPort=parseInt(d.containerPort)}catch(u){return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"容器端口").concat(d.containerPort,"错误")}}}}catch(l){p.e(l)}finally{p.f()}if(l=Ne(o),l)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"容器").concat(l)};Ae(o.resources.limits),Ae(o.resources.requests),o.init?a.push(o):s.push(o),delete o.init}}catch(l){i.e(l)}finally{i.f()}e.spec.template.spec.containers=s,e.spec.template.spec.initContainers=a}function Ae(e){if(e){if(e.memory)try{e.memory=parseFloat(e.memory)+"M"}catch(t){}else void 0!=e.memory&&delete e.memory;e.cpu||void 0==e.cpu||delete e.cpu}}function Te(e){e.memory&&(e.memory=e.memory.substr(0,e.memory.length-1))}function je(e){if(!e.probe)return[null,""];console.log(e);var t={successThreshold:e.successThreshold,failureThreshold:e.failureThreshold,initialDelaySeconds:e.initialDelaySeconds,timeoutSeconds:e.timeoutSeconds,periodSeconds:e.periodSeconds};if("http"==e.type||"https"==e.type){var a=e.handle.port;if(isNaN(a)||(a=parseInt(a)),!a)return[null,"健康检查HTTP端口为空"];t["httpGet"]={path:e.handle.path,port:a,scheme:"HTTP"},"https"==e.type&&(t.httpGet.scheme="HTTPS")}if("command"==e.type){var s=[];if(!e.handle.command)return[null,"健康检查命令为空"];try{s=JSON.parse(e.handle.command)}catch(l){s=[e.handle.command]}t["exec"]={command:s}}if("tcp"==e.type){a=e.handle.port;if(isNaN(a)||(a=parseInt(a)),!a)return[null,"健康检查TCP端口为空"];t["tcpSocket"]={port:a}}return[t,""]}function Ne(e){var t,a=[],s=Object(r["a"])(e.env);try{for(s.s();!(t=s.n()).done;){var l=t.value;if(!l.name)return"环境变量名称为空";"value"==l.type?a.push({name:l.name,value:l.value}):"configMap"==l.type?a.push({name:l.name,valueFrom:{configMapKeyRef:{name:l.value,key:l.key}}}):"secret"==l.type?a.push({name:l.name,valueFrom:{secretKeyRef:{name:l.value,key:l.key}}}):"field"==l.type?a.push({name:l.name,valueFrom:{fieldRef:{fieldPath:l.value}}}):"resource"==l.type&&a.push({name:l.name,valueFrom:{resourceFieldRef:{resource:l.value}}})}}catch(i){s.e(i)}finally{s.f()}e.env=a}function De(e){var t,a=[],s=Object(r["a"])(e.env);try{for(s.s();!(t=s.n()).done;){var l=t.value;l.value?a.push({type:"value",name:l.name,value:l.value}):l.valueFrom&&("configMapKeyRef"in l.valueFrom?a.push({type:"configMap",name:l.name,value:l.valueFrom.configMapKeyRef.name,key:l.valueFrom.configMapKeyRef.key}):"secretKeyRef"in l.valueFrom?a.push({type:"secret",name:l.name,value:l.valueFrom.secretKeyRef.name,key:l.valueFrom.secretKeyRef.key}):"fieldRef"in l.valueFrom?a.push({type:"field",name:l.name,value:l.valueFrom.configMapKeyRef.fieldPath}):"resourceFieldRef"in l.valueFrom&&a.push({type:"resource",name:l.name,value:l.valueFrom.configMapKeyRef.resource}))}}catch(i){s.e(i)}finally{s.f()}e.env=a}function Ie(e){var t,a=[],s=[],l=Object(r["a"])(e.spec.template.spec.volumes);try{for(l.s();!(t=l.n()).done;){var i=t.value;if(!i.name)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"中存储卷名称为空")};if("volumeClaimTemplates"==i.type&&"StatefulSet"==e.kind){if(!i[i.type].requests)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"中volumeClaimTemplate存储请求大小为空")};var o={metadata:{name:i.name},spec:{accessModes:i[i.type].accessModes,storageClassName:i[i.type].storageClassName,resources:{requests:{storage:i[i.type].requests+"Gi"}}}};s.push(o)}else{var n={name:i.name};"configMap"==i.type||"secret"==i.type?(n[i.type]={items:i[i.type].items},i[i.type].defaultMode&&(n[i.type].defaultMode=parseInt(i[i.type].defaultMode,8)),"configMap"==i.type?n[i.type]["name"]=i[i.type].name:n[i.type]["secretName"]=i[i.type].secretName):n[i.type]=i[i.type],a.push(n)}}}catch(c){l.e(c)}finally{l.f()}a.length>0&&(e.spec.template.spec.volumes=a),s.length>0&&"StatefulSet"==e.kind&&(e.spec.volumeClaimTemplates=s)}function Ee(e){var t=[],a=["persistentVolumeClaim","hostPath","emptyDir","nfs","glusterfs"];if("StatefulSet"==e.kind&&e.spec.volumeClaimTemplates){var s,l=Object(r["a"])(e.spec.volumeClaimTemplates);try{for(l.s();!(s=l.n()).done;){var i=s.value,o=Be(),n=i.spec.resources.requests.storage;o.type="volumeClaimTemplates",o.name=i.metadata.name,o.volumeClaimTemplates={accessModes:i.spec.accessModes,storageClassName:i.spec.storageClassName,requests:n.substr(0,n.length-2)},t.push(o)}}catch(b){l.e(b)}finally{l.f()}}var c,p=Object(r["a"])(e.spec.template.spec.volumes);try{for(p.s();!(c=p.n()).done;){var d=c.value,u=Be();if(u.name=d.name,d.configMap)u.type="configMap",u.configMap=d.configMap;else if(d.secret)u.type="secret",u.secret={name:d.secret.secretName},d.secret.items&&(u.secret.items=d.secret.items),d.secret.defaultMode&&(u.secret.defaultMode=d.secret.defaultMode);else{var m,f=Object(r["a"])(a);try{for(f.s();!(m=f.n()).done;){var v=m.value;v in d&&(u.type=v,u[v]=d[v])}}catch(b){f.e(b)}finally{f.f()}}t.push(u)}}catch(b){p.e(b)}finally{p.f()}e.spec.template.spec.volumes=t}function qe(e){var t=e.spec.template.spec;if(t.nodeSelector.length>0){var a,s={},l=Object(r["a"])(t.nodeSelector);try{for(l.s();!(a=l.n()).done;){var i=a.value;if(!i.key)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"节点选择标签key为空")};s[i.key]=i.value}}catch(n){l.e(n)}finally{l.f()}t.nodeSelector=s}else t.nodeSelector={};var o=e.spec.template.spec.affinity,n=Me(o);if(n)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name).concat(n)};if(n=Le(o,"podAffinity"),n)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name).concat(n)};if(n=Le(o,"podAntiAffinity"),n)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name).concat(n)};if(t.tolerations.length>0){var c,p=Object(r["a"])(t.tolerations);try{for(p.s();!(c=p.n()).done;){var d=c.value;isNaN(d["tolerationSeconds"])||(d["tolerationSeconds"]=parseInt(d["tolerationSeconds"]))}}catch(n){p.e(n)}finally{p.f()}}}function Me(e){if(0!=e.nodeAffinity.length){var t,a=[],s=[],l=Object(r["a"])(e.nodeAffinity);try{for(l.s();!(t=l.n()).done;){var i,o=t.value,n=[],c=[],p=Object(r["a"])(o.nodeSelectorTerms);try{for(p.s();!(i=p.n()).done;){var d=i.value,u={key:d.key||"",operator:d.operator};if(["In","NotIn"].indexOf(d.operator)>=0)if(d.values){var m=d.values.split(",");u.values=m}else u.values=[];else if(["Gt","Lt"].indexOf(d.operator)>=0){try{m=parseInt(d.vlaues)}catch(b){return"节点亲和性操作为Gt/Lt时，值只能为数字"}u.values=[m]}"label"===d.type?n.push(u):"field"===d.type&&c.push(u)}}catch(b){p.e(b)}finally{p.f()}var f={};if(n.length>0&&(f.matchExpressions=n),c.length>0&&(f.matchFields=c),"required"===o.type)a.push(f);else if("preferred"===o.type){if(!o.weight||o.weight<1||o.weight>100)return"节点亲和性权重值范围为1-100";s.push({weight:o.weight,preference:f})}}}catch(b){l.e(b)}finally{l.f()}var v={};a.length>0&&(v.requiredDuringSchedulingIgnoredDuringExecution={nodeSelectorTerms:a}),s.length>0&&(v.preferredDuringSchedulingIgnoredDuringExecution=s),(v.requiredDuringSchedulingIgnoredDuringExecution||v.preferredDuringSchedulingIgnoredDuringExecution)&&(e.nodeAffinity=v)}else e.nodeAffinity={}}function Re(e){var t=[];if(e.matchExpressions){var a,s=Object(r["a"])(e.matchExpressions);try{for(s.s();!(a=s.n()).done;){var l=a.value,i={type:"label",key:l.key,operator:l.operator};["In","NotIn"].indexOf(l.operator)>=0?i.values=l.values?l.values.join(","):"":["Gt","Lt"].indexOf(l.operator)>=0&&(i.vlaues=l.values?l.values[0]:""),t.push(i)}}catch(d){s.e(d)}finally{s.f()}}if(e.matchFields){var o,n=Object(r["a"])(e.matchFields);try{for(n.s();!(o=n.n()).done;){var c=o.value,p={type:"field",key:c.key,operator:c.operator};["In","NotIn"].indexOf(c.operator)>=0?p.values=c.values?c.values.join(","):"":["Gt","Lt"].indexOf(c.operator)>=0&&(p.vlaues=c.values?c.values[0]:""),t.push(p)}}catch(d){n.e(d)}finally{n.f()}}return t}function Ve(e){var t=e.nodeAffinity;t||(e.nodeAffinity=[]);var a=[];if(t.requiredDuringSchedulingIgnoredDuringExecution&&t.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms){var s,l=Object(r["a"])(t.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms);try{for(l.s();!(s=l.n()).done;){var i=s.value;a.push({type:"required",nodeSelectorTerms:Re(i)})}}catch(p){l.e(p)}finally{l.f()}}if(t.preferredDuringSchedulingIgnoredDuringExecution){var o,n=Object(r["a"])(t.preferredDuringSchedulingIgnoredDuringExecution);try{for(n.s();!(o=n.n()).done;){var c=o.value;a.push({type:"preferred",weight:c.weight,nodeSelectorTerms:Re(c.preference)})}}catch(p){n.e(p)}finally{n.f()}}e.nodeAffinity=a}function Le(e,t){var a,s=[],l=[],i=Object(r["a"])(e[t]);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!o.podAffinityTerm.topologyKey)return" Pod亲和性中拓扑键不能为空";var n,c=[],p={},d=Object(r["a"])(o.podAffinityTerm.labelSelector);try{for(d.s();!(n=d.n()).done;){var u=n.value;if("Equal"===u.operator)p[u.key]=u.values;else if(["In","NotIn"].indexOf(u.operator)>=0){if(u.values)var m=u.values.split(",");else m=[];c.push({key:u.key,operator:u.operator,values:m})}else["Exists","DoseNotExist"].indexOf(u.operator)>=0&&c.push({key:u.key,operator:u.operator})}}catch(h){d.e(h)}finally{d.f()}var f={};c.length>0&&(f.matchExpressions=c),"{}"!==JSON.stringify(p)&&(f.matchLabels=p);var v={namespaces:o.podAffinityTerm.namespaces,topologyKey:o.podAffinityTerm.topologyKey};if((f.matchExpressions||f.matchLabels)&&(v.labelSelector=f),"required"===o.type)s.push(v);else if("preferred"===o.type){if(!o.weight||o.weight<1||o.weight>100)return" Pod亲和性权重值范围为1-100";l.push({weight:parseInt(o.weight),podAffinityTerm:v})}}}catch(h){i.e(h)}finally{i.f()}var b={};s.length>0&&(b.requiredDuringSchedulingIgnoredDuringExecution=s),l.length>0&&(b.preferredDuringSchedulingIgnoredDuringExecution=l),e[t]=b}function Fe(e){if(!e)return{};var t={namespaces:e.namespaces,topologyKey:e.topologyKey},a=[];if(e.labelSelector&&e.labelSelector.matchLabels)for(var s in e.labelSelector.matchLabels)a.push({key:s,values:e.labelSelector.matchLabels[s],operator:"Equal"});if(e.labelSelector&&e.labelSelector.matchExpressions){var l,i=Object(r["a"])(e.labelSelector.matchExpressions);try{for(i.s();!(l=i.n()).done;){var o=l.value,n=o.values;["In","NotIn"].indexOf(o.operator)>=0&&(n=o.values.join(",")),a.push({key:o.key,operator:o.operator,values:n})}}catch(c){i.e(c)}finally{i.f()}}return t["labelSelector"]=a,t}function Ue(e,t){var a=e[t];a||(e[t]=[]);var s=[];if(a.requiredDuringSchedulingIgnoredDuringExecution){var l,i=Object(r["a"])(a.requiredDuringSchedulingIgnoredDuringExecution);try{for(i.s();!(l=i.n()).done;){var o=l.value;s.push({type:"required",podAffinityTerm:Fe(o)})}}catch(d){i.e(d)}finally{i.f()}}if(a.preferredDuringSchedulingIgnoredDuringExecution){var n,c=Object(r["a"])(a.preferredDuringSchedulingIgnoredDuringExecution);try{for(c.s();!(n=c.n()).done;){var p=n.value;s.push({type:"preferred",weight:p.weight,podAffinityTerm:Fe(p.podAffinityTerm)})}}catch(d){c.e(d)}finally{c.f()}}e[t]=s}function Je(e){var t=e.spec.template.spec;if(t.nodeSelector){var a=[];for(var s in t.nodeSelector)a.push([{key:s,values:t.nodeSelector[s]}]);t.nodeSelector=a}else t.nodeSelector=[];t.tolerations||(t.tolerations=[]),Ve(t.affinity),Ue(t.affinity,"podAffinity"),Ue(t.affinity,"podAntiAffinity")}function Be(){return{name:"",type:"persistentVolumeClaim",persistentVolumeClaim:{},glusterfs:{},nfs:{},secret:{items:[],name:""},configMap:{items:[],secretName:""},emptyDir:{},hostPath:{},volumeClaimTemplates:{accessModes:["ReadWriteOnce"]}}}function Ge(){return{init:!1,name:"",image:"",command:"",args:"",workingDir:"",ports:[],env:[],resources:{limits:{},requests:{}},livenessProbe:{probe:!1,type:"http",handle:{},successThreshold:1,failureThreshold:3,initialDelaySeconds:0,timeoutSeconds:1,periodSeconds:10},readinessProbe:{probe:!1,type:"http",handle:{},successThreshold:1,failureThreshold:3,initialDelaySeconds:0,timeoutSeconds:1,periodSeconds:10},imagePullPolicy:"",volumeMounts:[],stdin:!1,tty:!1,securityContext:{seLinuxOptions:{},capabilities:{add:[],drop:[]}}}}function Ke(){return{backoffLimit:6,concurrencyPolicy:"Allow",schedule:"* * * * *"}}function He(){return{kind:"Deployment",apiVersion:"apps/v1",metadata:{name:"",labels:{},namespace:"{{ .Release.Namespace }}"},spec:{job:Ke(),replicas:1,strategy:{type:"RollingUpdate",maxSurge:"25%",maxUnavailable:"25%"},selector:{matchLabels:{}},template:{metadata:{labels:{}},spec:{nodeSelector:[],tolerations:[],affinity:{nodeAffinity:[],podAffinity:[],podAntiAffinity:[]},securityContext:{sysctls:[],seLinuxOptions:{}},hostAliases:[],containers:[Ge()],volumes:[]}}}}}function We(){return{kind:"Service",apiVersion:"v1",metadata:{name:"",labels:{},namespace:"{{ .Release.Namespace }}"},spec:{ports:[],selector:{},type:"ClusterIP"}}}function Ye(e){var t,a=Object(r["a"])(e.spec.ports);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!s.port)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"服务端口为空")};try{s.port=parseInt(s.port)}catch(l){return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"服务端口").concat(s.port,"错误")}}if(!s.targetPort)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"容器端口为空")};try{s.targetPort=parseInt(s.targetPort)}catch(l){return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"容器端口").concat(s.targetPort,"错误")}}if("NodePort"==e.spec.type&&s.nodePort)try{s.nodePort=parseInt(s.nodePort)}catch(l){return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name," nodePort ").concat(s.targetPort,"错误")}}else void 0!=s.nodePort&&delete s.nodePort}}catch(i){a.e(i)}finally{a.f()}return{tpl:e}}function Xe(){return{kind:"ConfigMap",apiVersion:"v1",metadata:{name:"",labels:{},namespace:"{{ .Release.Namespace }}"},data:[]}}function Qe(e){var t,a={},s=Object(r["a"])(e.data);try{for(s.s();!(t=s.n()).done;){var l=t.value;if(!l.key)return{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name,"配置项key为空")};a[l.key]=l.value}}catch(i){s.e(i)}finally{s.f()}return e.data=a,{tpl:e}}function Ze(e){var t=[];for(var a in e.data)t.push({key:a,value:e.data[a]});e.data=t}function et(){return{kind:"Secret",apiVersion:"v1",metadata:{name:"",labels:{},namespace:"{{ .Release.Namespace }}"},data:[],tls:{},userPass:{},imagePass:{},type:"Opaque"}}function tt(e){var t=Object(c["e"])(e);return t?{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name).concat(t)}:{tpl:e}}function at(e){Object(c["d"])(e)}function st(e){["Deployment","StatefulSet","DaemonSet","CronJob","Job"].indexOf(e.kind)>=0?lt(e):"ConfigMap"==e.kind?Ze(e):"Secret"==e.kind?at(e):"PersistentVolumeClaim"==e.kind&&ut(e)}function lt(e){"Job"==e.kind?rt(e):"CronJob"==e.kind?it(e):e.spec.job={backoffLimit:6,concurrencyPolicy:"Allow"};var t={type:"RollingUpdate",maxUnavailable:"25%",maxSurge:"25%"};if("Deployment"==e.kind)if(e.spec.strategy&&"RollingUpdate"!=e.spec.strategy.type&&e.spec.strategy.type)t={type:"Recreate"};else{var a=e.spec.strategy?e.spec.strategy.rollingUpdate:null;t={type:"RollingUpdate",maxUnavailable:a?a.maxUnavailable:"25%",maxSurge:a?a.maxSurge:"25%"}}e.spec.strategy=t,e.spec.replicas||(e.spec.replicas=1),ot(e),Je(e),Ee(e);var s=e.spec.template.spec;s.hostAliases||(s.hostAliases=[]),s.securityContext||(s.securityContext={sysctls:[],seLinuxOptions:{}})}function rt(e){e.spec.job=Ke(),e.spec.backoffLimit&&(e.spec.job.backoffLimit=e.spec.backoffLimit,delete e.spec.backoffLimit),e.spec.completions&&(e.spec.job.completions=e.spec.completions,delete e.spec.completions),e.spec.parallelism&&(e.spec.job.parallelism=e.spec.parallelism,delete e.spec.parallelism)}function it(e){var t=e.spec.jobTemplate.spec;t.job=Ke(),t.backoffLimit&&(t.job.backoffLimit=t.backoffLimit,delete t.backoffLimit),t.completions&&(t.job.completions=t.completions,delete t.completions),t.parallelism&&(t.job.parallelism=t.parallelism,delete t.parallelism),e.spec.concurrencyPolicy&&(t.job.concurrencyPolicy=e.spec.concurrencyPolicy,delete e.spec.concurrencyPolicy),e.spec.schedule&&(t.job.schedule=e.spec.schedule,delete e.spec.schedule),e.spec=t}function ot(e){var t=e.spec.template.spec;if(t.initContainers){var a,s=Object(r["a"])(t.initContainers);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.init=!0,nt(l),t.containers.push(l)}}catch(c){s.e(c)}finally{s.f()}}var i,o=Object(r["a"])(t.containers);try{for(o.s();!(i=o.n()).done;){var n=i.value;nt(n)}}catch(c){o.e(c)}finally{o.f()}}function nt(e){e.livenessProbe=ct(e.livenessProbe),e.readinessProbe=ct(e.readinessProbe),e.command&&e.command.length>0?e.command=JSON.stringify(e.command):e.command="",e.args&&e.args.length>0?e.args=JSON.stringify(e.args):e.args="",De(e),e.resources?(Te(e.resources.requests),Te(e.resources.limits)):e.resources={}}function ct(e){return e?(e.probe=!0,"httpGet"in e?(e.type="http","HTTPS"==e.httpGet.scheme&&(e.type="https"),e.handle=e.httpGet,delete e.httpGet):"tcpSocket"in e?(e.type="tcp",e.handle=e.tcpSocket,delete e.tcpSocket):"exec"in e&&(e.type="command",e.handle=e.exec,delete e.exec),e):{probe:!1,type:"http",handle:{},successThreshold:1,failureThreshold:3,initialDelaySeconds:0,timeoutSeconds:1,periodSeconds:10}}function pt(){return{kind:"PersistentVolumeClaim",apiVersion:"v1",metadata:{name:"",labels:{},namespace:"{{ .Release.Namespace }}"},spec:{accessModes:[],storageClassName:"",resources:{requests:{}}}}}function dt(e){return 0==e.spec.accessModes.length?{err:"应用资源".concat(e.kind,"/").concat(e.metadata.name," accessModes为空")}:(e.spec.resources.requests.storage&&(e.spec.resources.requests.storage+="Gi"),{tpl:e})}function ut(e){var t=e.spec.resources.requests.storage;return t&&(e.spec.resources.requests.storage=t.substr(0,t.length-2)),{tpl:e}}var mt=a("e2c1"),ft={name:"appCreate",components:{Clusterbar:i["a"],Workload:Q,Service:le,ConfigMap:pe,Secret:be,pvc:ke},mounted:function(){var e=this;window.onresize=function(){return function(){var t=window.innerHeight-130;e.maxHeight=t}()}},data:function(){return{maxHeight:window.innerHeight-130,cellStyle:{border:0},titleName:["应用管理","创建"],loading:!1,createFormVisible:!1,updateFormVisible:!1,installLoading:!1,resourceTabVal:0,workloadTypes:["Deployment","StatefulSet","DaemonSet","CronJob","Job"],chart:{templates:{},values:"",version:""},form:{id:"",name:"",type:"ordinary_app",version:"0.0.1",fourthVersion:Math.ceil(1e5*Math.random()),description:"",version_description:"",templates:[]},rules:{name:[{required:!0,message:" ",trigger:["blur","change"]}],version:[{required:!0,message:" ",trigger:["blur","change"]}],description:[{required:!0,message:" ",trigger:["blur","change"]}]}}},created:function(){if(this.appVersionId)this.getAppVersion();else{var e=Ce("Workload");this.form.templates=[e]}},computed:{projectId:function(){return this.$route.params.workspaceId},appVersionId:function(){return this.$route.params.appVersionId}},methods:{kindTemplate:Ce,getAppVersion:function(){var e=this;this.loading=!0,Object(o["f"])(this.appVersionId).then((function(t){e.form.id=t.data.id,e.form.name=t.data.name,e.form.type=t.data.type,e.form.description=t.data.description,e.chart.version=t.data.package_version,e.form.version=e.chart.version.split("-")[0];var a,s=mt["default"].load(t.data.values),l=Object(r["a"])(t.data.templates);try{for(l.s();!(a=l.n()).done;){var i=a.value;try{var o=mt["default"].load(atob(decodeURIComponent(i.data)))}catch(m){return console.log(m),void n["Message"].error(m)}if(st(o),e.workloadTypes.indexOf(o.kind)>-1){var c,p=o.spec.template.spec,d=Object(r["a"])(p.containers);try{for(d.s();!(c=d.n()).done;){var u=c.value;u.image=s.workloads[o.metadata.name]["containers"][u.name]["image"]}}catch(f){d.e(f)}finally{d.f()}["Deployment","StatefulSet"].indexOf(o.kind)>-1&&s.workloads[o.metadata.name].replicas&&(o.spec.replicas=s.workloads[o.metadata.name].replicas)}e.form.templates.push(o)}}catch(f){l.e(f)}finally{l.f()}console.log(e.form),e.loading=!1})).catch((function(t){e.loading=!1}))},appFormNameChange:function(e){this.form.templates[0].metadata.name=e,this.form.templates[0].spec.template.spec.containers[0].name=e,this.form.templates.length>1&&"Service"==this.form.templates[1].kind&&(this.form.templates[1].metadata.name=e)},handleCreateApp:function(){var e=this;if(this.form.version)if(this.form.version_description){var t=this.form.version;this.form.fourthVersion&&(t+="-"+this.form.fourthVersion);var a={apiVersion:"v2",name:this.form.name,version:t,appVersion:t,description:this.form.description},s=mt["default"].dump(a),l={scope:"project_app",scope_id:parseInt(this.projectId),name:this.form.name,type:this.form.type,version:t,chart:s,templates:this.chart.templates,values:this.chart.values,description:this.form.description,version_description:this.form.version_description};this.loading=!0,Object(o["a"])(l).then((function(){e.loading=!1,n["Message"].success("创建应用成功"),e.$router.push({name:"workspaceApp"})})).catch((function(t){e.loading=!1}))}else n["Message"].error("请输入版本说明");else n["Message"].error("应用版本为空")},closeFormDialog:function(){this.updateFormVisible=!1,this.createFormVisible=!1},createAppDialog:function(){if(this.form.name)if(this.form.description){this.chart.templates={};var e,t={workloads:{}},a=0,s=Object(r["a"])(this.form.templates);try{for(s.s();!(e=s.n()).done;){var l=e.value,i=_e(l,this.form.name);if(i.err)return void n["Message"].error(i.err);var o=i.tpl;if(console.log(o),this.workloadTypes.indexOf(l.kind)>-1){var c={},p={};p="CronJob"==l.kind?o.spec.jobTemplate.spec:o.spec;var d,u=Object(r["a"])(p.template.spec.containers);try{for(u.s();!(d=u.n()).done;){var m=d.value;c[m.name]={image:m.image},m.image='{{ index .Values "workloads" "'.concat(l.metadata.name,'" "containers" "').concat(m.name,'" "image" }}')}}catch(y){u.e(y)}finally{u.f()}var f,v=Object(r["a"])(p.template.spec.initContainers);try{for(v.s();!(f=v.n()).done;){var b=f.value;c[b.name]={image:b.image},b.image='{{ index .Values "workloads" "'.concat(l.metadata.name,'" "containers" "').concat(b.name,'" "image" }}')}}catch(y){v.e(y)}finally{v.f()}t.workloads[l.metadata.name]={containers:c},["Deployment","StatefulSet"].indexOf(l.kind)>-1&&(t.workloads[l.metadata.name].replicas=o.spec.replicas,o.spec.replicas='0{{ index .Values "workloads" "'.concat(l.metadata.name,'" "replicas" }}')),t.workloads[l.metadata.name].kind=l.kind}"Service"==o.kind&&(o.spec.selector={"kubespace.cn/app":this.form.name});var h="".concat(a<10?"0"+a:""+a).concat(o.metadata.name,"-").concat(o.kind,".yaml").toLowerCase();this.chart.templates[h]=mt["default"].dump(o),a++}}catch(y){s.e(y)}finally{s.f()}this.chart.values=mt["default"].dump(t),console.log(this.chart.templates),this.form.fourthVersion=Math.floor(new Date/1e3).toString(36),this.createFormVisible=!0}else n["Message"].error("请输入应用描述");else n["Message"].error("应用名称为空")},cancelSaveApp:function(){this.$router.push({name:"workspaceApp"})},resourceTabRemove:function(e){var t=parseInt(e);if(this.form.templates.length<=1)return!1;var a=this.resourceTabVal;t<parseInt(this.resourceTabVal)?a=parseInt(this.resourceTabVal)-1:t===parseInt(this.resourceTabVal)&&(a=t-1,t<=0&&(a=0)),this.form.templates.splice(t,1),this.resourceTabVal=a+""},resourceAddClick:function(e){var t=Ce(e);if("Service"==e){var a,s=!1,l=Object(r["a"])(this.form.templates);try{for(l.s();!(a=l.n()).done;){var i=a.value;"Service"==i.kind&&(s=!0)}}catch(o){l.e(o)}finally{l.f()}s||(t.metadata.name=this.form.name)}this.form.templates.push(t),this.resourceTabVal=this.form.templates.length-1+""}}},vt=ft,bt=(a("13cc"),a("57c2"),Object(f["a"])(vt,s,l,!1,null,"8357d9f6",null));t["default"]=bt.exports},"7ad9":function(e,t,a){},"887f":function(e,t,a){"use strict";var s=a("42a4"),l=a.n(s);l.a},9419:function(e,t,a){},"958e":function(e,t,a){"use strict";var s=a("be66"),l=a.n(s);l.a},"9b0a":function(e,t,a){"use strict";var s=a("cdd0"),l=a.n(s);l.a},a15b:function(e,t,a){"use strict";var s=a("23e7"),l=a("44ad"),r=a("fc6a"),i=a("a640"),o=[].join,n=l!=Object,c=i("join",",");s({target:"Array",proto:!0,forced:n||!c},{join:function(e){return o.call(r(this),void 0===e?",":e)}})},affc:function(e,t,a){},b728:function(e,t,a){"use strict";var s=a("0892"),l=a.n(s);l.a},be66:function(e,t,a){},bee9:function(e,t,a){"use strict";var s=a("7ad9"),l=a.n(s);l.a},bf1e:function(e,t,a){},c1cf:function(e,t,a){"use strict";var s=a("76b1"),l=a.n(s);l.a},cdd0:function(e,t,a){},ecf8:function(e,t,a){},efc9:function(e,t,a){"use strict";var s=a("0013"),l=a.n(s);l.a}}]);